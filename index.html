<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bel√©p√©s + J√°t√©kok ‚Ä¢ Mem√≥ria ‚Ä¢ K√≠gy√≥ ‚Ä¢ K≈ë-Pap√≠r-Oll√≥</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  /* ===== Global + Modern Animated Background ===== */
  :root{
    --txt:#e9eefc; --muted:#9db0d4; --border:rgba(255,255,255,.16);
    --glass:rgba(15,24,45,.72); --btn1:#2e5fff; --btn2:#1b47d8; --good:#57d79e; --bad:#ff6b6b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; color:var(--txt);
    background:#070b14; overflow-x:hidden;
  }
  /* animated gradient backdrop */
  .bg{
    position:fixed; inset:-10% -10% -10% -10%; z-index:-1; filter:blur(40px);
    background:
      radial-gradient(40% 35% at 15% 20%, #2e5fff66, transparent 65%),
      radial-gradient(45% 35% at 85% 80%, #57d79e66, transparent 70%),
      radial-gradient(70% 60% at 50% 50%, #8a2eff33, transparent 70%),
      #090f1c;
    animation:bgMove 16s ease-in-out infinite alternate;
  }
  @keyframes bgMove{
    0%   { transform:scale(1) translate(0,0) }
    50%  { transform:scale(1.06) translate(-1.2%, -1.2%) }
    100% { transform:scale(1.12) translate(1.5%, 1.2%) }
  }

  /* ===== Auth overlay (always over the background) ===== */
  .overlay{
    position:fixed; inset:0; display:grid; place-items:center; z-index:9999;
    background:linear-gradient(180deg, #00000066, #00000080);
    backdrop-filter:saturate(120%) blur(8px);
  }
  .card{
    width:min(94vw, 560px); border:1px solid var(--border); border-radius:22px;
    background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
    color:var(--txt);
    box-shadow:0 30px 80px rgba(0,0,0,.45); backdrop-filter: blur(14px);
    padding:22px;
    transform:translateY(6px); opacity:0; animation: pop .28s .05s ease-out forwards;
  }
  @keyframes pop{to{transform:translateY(0);opacity:1}}

  .topbar{
    position:fixed; top:12px; right:12px; z-index:20; display:flex; gap:8px; align-items:center;
  }
  .btn{
    padding:10px 14px; border-radius:12px; border:0; cursor:pointer; color:#fff; font-weight:800;
    background:linear-gradient(180deg,var(--btn1),var(--btn2)); box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  .btn.secondary{ background:#0f2142; border:1px solid var(--border); color:var(--txt) }

  .top{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:6px}
  .top h3{margin:0;font-size:22px;font-weight:800}
  .tabs{margin:14px 0;display:flex;gap:8px;background:rgba(255,255,255,.06);border:1px solid var(--border);padding:6px;border-radius:999px}
  .tabs button{flex:1;border-radius:999px;padding:10px 14px;border:0;background:transparent;color:var(--muted);font-weight:700;cursor:pointer}
  .tabs .active{background:#0f2142;color:#fff; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08)}
  .form label{display:block;font-size:13px;color:var(--muted);margin:10px 2px}
  .form input{
    width:100%;padding:13px 14px;border-radius:14px;border:1px solid var(--border); background:var(--glass); color:var(--txt); outline:none
  }
  .form input:focus{box-shadow:0 0 0 4px rgba(46,95,255,.18); border-color:#2e5fff}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .note{font-size:13px;margin-top:6px}
  .ok{color:var(--good)} .err{color:var(--bad)}
  .hide{display:none!important}

  /* ===== Games layout ===== */
  .container{max-width:1200px;margin:80px auto 60px;padding:0 18px}
  h2.title{margin:0 0 12px 0;font-size:28px;font-weight:800;letter-spacing:.2px}
  .cards{
    display:grid; gap:16px;
    grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
  }
  .pane{
    border:1px solid var(--border); border-radius:18px; background:rgba(255,255,255,.06);
    backdrop-filter: blur(10px); padding:16px; min-height:220px;
  }
  .pane h3{margin:0 0 8px 0}
  .section-actions{margin:8px 0 12px 0; display:flex; gap:8px; flex-wrap:wrap}
  .muted{color:var(--muted); font-size:14px}

  /* Memory grid */
  #memory-grid{
    display:grid; grid-template-columns:repeat(auto-fill, minmax(60px,1fr));
    gap:8px; max-width:1000px; margin:10px auto 0;
  }
  .mcard{
    background:#1b2a48; border-radius:8px; height:60px; display:flex; align-items:center; justify-content:center;
    font-size:28px; cursor:pointer; transition:all .2s ease; user-select:none;
  }
  .mcard.revealed{background:#2d4e8a}
  .mcard.matched{background:#2ecc71; color:#fff; cursor:default}

  /* Snake */
  #snake-wrap{display:grid; place-items:center}
  #snake{
    background:#0c162b; border:1px solid var(--border); border-radius:10px;
    width:600px; height:400px; max-width:100%; image-rendering:pixelated;
  }
  .hud{display:flex; gap:12px; justify-content:center; margin:8px 0}

  /* RPS */
  .mode-tabs{display:flex; gap:8px; background:rgba(255,255,255,.06); border:1px solid var(--border); padding:6px; border-radius:999px; justify-content:center}
  .mode-tabs button{border:0; padding:8px 12px; border-radius:999px; background:transparent; color:var(--muted); font-weight:700; cursor:pointer}
  .mode-tabs .active{background:#0f2142; color:#fff}
  .rps-choices{display:flex; gap:8px; justify-content:center; margin:8px 0; flex-wrap:wrap}
  .rps-btn{font-size:20px; padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:#0f2142; color:#fff; cursor:pointer}
  .rps-status{min-height:24px; text-align:center; margin-top:8px}

  /* Logged-in bar */
  .welcome{
    position:fixed; left:12px; top:12px; z-index:20; display:flex; gap:10px; align-items:center;
    background:rgba(15,33,66,.85); padding:8px 12px; border:1px solid var(--border); border-radius:12px;
  }
</style>
</head>
<body>
<div class="bg"></div>

<!-- ===== Top bars (shown when logged in) ===== -->
<div id="welcome" class="welcome hide">
  <span id="who"></span>
  <button id="logout" class="btn secondary">Kijelentkez√©s</button>
</div>

<!-- ===== AUTH OVERLAY ===== -->
<div id="auth" class="overlay" role="dialog" aria-modal="true">
  <div class="card">
    <div class="top">
      <h3>Bejelentkez√©s & Regisztr√°ci√≥</h3>
      <button id="x" class="btn secondary">Elrejt</button>
    </div>
    <div class="tabs">
      <button id="tabL" class="active">Bel√©p√©s</button>
      <button id="tabR">Regisztr√°ci√≥</button>
    </div>
    <!-- LOGIN -->
    <form id="formL" class="form" autocomplete="on">
      <label>E-mail</label>
      <input type="email" name="email" placeholder="te@pelda.hu" required />
      <label>Jelsz√≥</label>
      <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6" />
      <div id="msgL" class="note"></div>
      <div style="margin-top:12px"><button class="btn" type="submit">Bel√©p√©s</button></div>
    </form>
    <!-- REGISTER -->
    <form id="formR" class="form hide" autocomplete="on">
      <div class="row">
        <div>
          <label>N√©v</label>
          <input type="text" name="name" placeholder="Teljes neved" required />
        </div>
        <div>
          <label>E-mail</label>
          <input type="email" name="email" placeholder="te@pelda.hu" required />
        </div>
      </div>
      <label>Jelsz√≥ (min. 6)</label>
      <input type="password" name="password" placeholder="legal√°bb 6 karakter" required minlength="6" />
      <div id="msgR" class="note"></div>
      <div style="margin-top:12px"><button class="btn" type="submit">Fi√≥k l√©trehoz√°sa</button></div>
    </form>
  </div>
</div>

<!-- ===== GAMES AREA ===== -->
<div id="games" class="container hide">
  <h2 class="title">üéÆ J√°t√©kok men√º</h2>
  <p class="muted">V√°lassz egy j√°t√©kot! A h√°tt√©r mindenhol akt√≠v marad a modern hangulat√©rt.</p>

  <div class="cards">
    <!-- Memory -->
    <section class="pane">
      <h3>üß† Mem√≥riaj√°t√©k (60 p√°r)</h3>
      <div class="section-actions">
        <button class="btn" onclick="startMemory()">Ind√≠t√°s / √öjrakezd√©s</button>
      </div>
      <div id="memory-grid"></div>
      <p id="memory-status" class="muted"></p>
    </section>

    <!-- Snake -->
    <section class="pane" id="snake-pane">
      <h3>üêç K√≠gy√≥</h3>
      <div class="section-actions">
        <button class="btn" onclick="snakeStart()">Start / Reset</button>
      </div>
      <div id="snake-wrap">
        <canvas id="snake" width="600" height="400"></canvas>
      </div>
      <div class="hud">
        <div>Pont: <b id="sn-score">0</b></div>
        <div>Max: <b id="sn-best">0</b></div>
      </div>
      <p class="muted">Ir√°ny√≠t√°s: nyilak / WASD</p>
    </section>

    <!-- RPS -->
    <section class="pane">
      <h3>‚úäüñê‚úå K≈ë-Pap√≠r-Oll√≥</h3>
      <div class="mode-tabs">
        <button id="rps-mode-classic" class="active">Hagyom√°nyos</button>
        <button id="rps-mode-modern">Modern (-1 vesztes)</button>
      </div>
      <div class="rps-choices">
        <button class="rps-btn" onclick="rpsChoose('rock')">‚úä K≈ë</button>
        <button class="rps-btn" onclick="rpsChoose('paper')">üñê Pap√≠r</button>
        <button class="rps-btn" onclick="rpsChoose('scissors')">‚úå Oll√≥</button>
      </div>
      <div class="hud">
        <div>Te: <b id="rps-you">0</b></div>
        <div>G√©p: <b id="rps-bot">0</b></div>
        <div>M√≥d: <b id="rps-mode-label">Hagyom√°nyos</b></div>
      </div>
      <div id="rps-last" class="rps-status muted"></div>
      <div class="section-actions">
        <button class="btn secondary" onclick="rpsReset()">Reset</button>
      </div>
    </section>
  </div>
</div>

<script>
/* ===== Simple client-side auth (LocalStorage + salted SHA-256) ===== */
(()=>{"use strict";
  const $=s=>document.querySelector(s);
  const auth=$("#auth"), tabL=$("#tabL"), tabR=$("#tabR"), formL=$("#formL"), formR=$("#formR"), msgL=$("#msgL"), msgR=$("#msgR");
  const welcome=$("#welcome"), who=$("#who"), logout=$("#logout"), x=$("#x");
  const K_USERS="au_users_v1", K_ME="au_me_v1";
  const load=(k,def)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? def }catch{ return def } };
  const save=(k,v)=> localStorage.setItem(k, JSON.stringify(v));
  function showGames(){
    $("#games").classList.remove("hide");
    welcome.classList.remove("hide");
    auth.style.display="none";
    const me = load(K_ME,null); who.textContent = me ? `${me.name} (${me.email})` : "";
  }
  async function sha256(str){
    const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(str));
    return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
  }
  function salt(len=16){ const a=new Uint8Array(len); crypto.getRandomValues(a); return Array.from(a).map(b=>b.toString(16).padStart(2,"0")).join(""); }
  function setTab(which){
    if(which==="L"){ tabL.classList.add("active"); tabR.classList.remove("active"); formL.classList.remove("hide"); formR.classList.add("hide"); msgL.textContent=""; msgR.textContent=""; }
    else { tabR.classList.add("active"); tabL.classList.remove("active"); formR.classList.remove("hide"); formL.classList.add("hide"); msgL.textContent=""; msgR.textContent=""; }
  }
  tabL.onclick=()=>setTab("L"); tabR.onclick=()=>setTab("R");
  x.onclick=()=>{ auth.style.display="none"; }; // elrejthet≈ë, de bel√©p√©s n√©lk√ºl a j√°t√©k rejtve marad

  formR.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const name=formR.name.value.trim(), email=formR.email.value.trim().toLowerCase(), pw=formR.password.value;
    if(!name||!email||pw.length<6){ msgR.textContent="T√∂lts ki minden mez≈ët (min. 6 jelsz√≥)."; msgR.className="note err"; return; }
    const users=load(K_USERS,{});
    if(users[email]){ msgR.textContent="Ezzel az e-maillel m√°r van fi√≥k."; msgR.className="note err"; return; }
    const s=salt(); const h=await sha256(pw+s);
    users[email]={name,email,salt:s,hash:h,createdAt:new Date().toISOString()};
    save(K_USERS,users); save(K_ME,{name,email,loginAt:new Date().toISOString()});
    showGames();
  });

  formL.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const email=formL.email.value.trim().toLowerCase(), pw=formL.password.value;
    const users=load(K_USERS,{}); const u=users[email];
    if(!u){ msgL.textContent="Nincs ilyen felhaszn√°l√≥."; msgL.className="note err"; return; }
    const h=await sha256(pw+u.salt); if(h!==u.hash){ msgL.textContent="Hib√°s jelsz√≥."; msgL.className="note err"; return; }
    save(K_ME,{name:u.name,email:u.email,loginAt:new Date().toISOString()});
    showGames();
  });

  logout.onclick=()=>{ localStorage.removeItem(K_ME); location.reload(); };

  // auto-show auth on load; if already logged in, go to games
  if(localStorage.getItem(K_ME)){ showGames(); }
})();
</script>

<script>
/* ===== Memory (60 pairs) ===== */
let memFirst=null, memLock=false, memPairs=0;
function startMemory(){
  const grid=document.getElementById("memory-grid");
  grid.innerHTML=""; document.getElementById("memory-status").textContent="";
  memFirst=null; memLock=false; memPairs=0;

  const base=["üî•","‚ùÑÔ∏è","üåô","üåç","‚≠ê","üçÄ","‚ö°","üíé","üéµ","üé≤","üß©","üéØ","üöÄ","üåà","üçé","üçå","üçì","ü•ù","ü••","üåπ","üåª","üçÑ","üåµ","üêç","üê¢","ü¶ä","ü¶Å","üê∏","üêô","üê¨","ü¶â","ü¶Ñ","üêâ","üëë","‚öîÔ∏è","üõ°Ô∏è","üèπ","üïπÔ∏è","üé®","üìö","üß≠","üîÆ","üí°","üß®","üéÅ","üéÜ","üèÜ","üìÄ","üì∑","üé¨","üé§","üéπ","ü•Å","üéª","üõ∏","üè∞","üß±","üö¶","üóø"];
  const symbols=[]; for(let i=0;i<60;i++){ symbols.push(base[i%base.length]); }
  let cards=[...symbols,...symbols]; cards.sort(()=>Math.random()-0.5);

  cards.forEach(sym=>{
    const div=document.createElement("div");
    div.className="mcard"; div.dataset.sym=sym;
    div.onclick=()=>memFlip(div); grid.appendChild(div);
  });
}
function memFlip(card){
  if(memLock||card.classList.contains("revealed")||card.classList.contains("matched")) return;
  card.classList.add("revealed"); card.textContent=card.dataset.sym;
  if(!memFirst){ memFirst=card; }
  else{
    if(memFirst.dataset.sym===card.dataset.sym){
      memFirst.classList.add("matched"); card.classList.add("matched"); memPairs++;
      if(memPairs===60) document.getElementById("memory-status").textContent="üéâ Nyert√©l! Minden p√°r megvan!";
      memFirst=null;
    }else{
      memLock=true;
      setTimeout(()=>{
        card.classList.remove("revealed"); card.textContent="";
        memFirst.classList.remove("revealed"); memFirst.textContent="";
        memFirst=null; memLock=false;
      },700);
    }
  }
}
</script>

<script>
/* ===== Snake ===== */
let sn, snCtx, snGrid=20, snX, snY, snVX, snVY, snTrail, snTail, snAppleX, snAppleY, snScore=0, snBest=0, snLoop;
function snakeStart(){
  const c=document.getElementById("snake"); snCtx=c.getContext("2d");
  reset(); if(snLoop) cancelAnimationFrame(snLoop); loop();
}
function reset(){
  const c=document.getElementById("snake");
  snX=10; snY=10; snVX=1; snVY=0; snTrail=[]; snTail=5; snScore=0;
  spawnApple();
  document.getElementById("sn-score").textContent=snScore;
  document.getElementById("sn-best").textContent=localStorage.getItem("sn_best")||0;
}
function spawnApple(){
  const c=document.getElementById("snake");
  snAppleX=Math.floor(Math.random()*(c.width/snGrid));
  snAppleY=Math.floor(Math.random()*(c.height/snGrid));
}
function loop(){
  const c=document.getElementById("snake"); snCtx.fillStyle="#0c162b"; snCtx.fillRect(0,0,c.width,c.height);
  snX+=snVX; snY+=snVY;
  const maxX=Math.floor(c.width/snGrid), maxY=Math.floor(c.height/snGrid);
  if(snX<0) snX=maxX-1; if(snX>=maxX) snX=0; if(snY<0) snY=maxY-1; if(snY>=maxY) snY=0;

  // draw apple
  snCtx.fillStyle="#57d79e"; snCtx.fillRect(snAppleX*snGrid, snAppleY*snGrid, snGrid-2, snGrid-2);

  // draw snake
  snCtx.fillStyle="#6ea8ff";
  for(let i=0;i<snTrail.length;i++){
    snCtx.fillRect(snTrail[i].x*snGrid, snTrail[i].y*snGrid, snGrid-2, snGrid-2);
    if(snTrail[i].x===snX && snTrail[i].y===snY){
      // collision -> reset
      snTail=5; snScore=0; document.getElementById("sn-score").textContent=snScore;
    }
  }
  snTrail.push({x:snX,y:snY});
  while(snTrail.length>snTail) snTrail.shift();

  // eat apple
  if(snAppleX===snX && snAppleY===snY){
    snTail++; snScore++; document.getElementById("sn-score").textContent=snScore;
    const best=+localStorage.getItem("sn_best")||0; if(snScore>best){ localStorage.setItem("sn_best", snScore); document.getElementById("sn-best").textContent=snScore; }
    spawnApple();
  }

  snLoop=requestAnimationFrame(loop);
}
addEventListener("keydown", e=>{
  const k=e.key.toLowerCase();
  if(k==="arrowleft"||k==="a"){ if(snVX!==1){ snVX=-1; snVY=0; } }
  if(k==="arrowright"||k==="d"){ if(snVX!==-1){ snVX=1; snVY=0; } }
  if(k==="arrowup"||k==="w"){ if(snVY!==1){ snVY=-1; snVX=0; } }
  if(k==="arrowdown"||k==="s"){ if(snVY!==-1){ snVY=1; snVX=0; } }
});
</script>

<script>
/* ===== Rock Paper Scissors (classic + modern -1) ===== */
let rpsYou=0, rpsBot=0, rpsMode="classic";
const rpsWins = { rock:"scissors", paper:"rock", scissors:"paper" };
function rpsSetMode(m){
  rpsMode = m;
  document.getElementById("rps-mode-label").textContent = (m==="classic" ? "Hagyom√°nyos" : "Modern (-1 vesztes)");
  document.getElementById("rps-mode-classic").classList.toggle("active", m==="classic");
  document.getElementById("rps-mode-modern").classList.toggle("active", m==="modern");
}
document.getElementById("rps-mode-classic").onclick=()=>rpsSetMode("classic");
document.getElementById("rps-mode-modern").onclick=()=>rpsSetMode("modern");
function rpsReset(){ rpsYou=0; rpsBot=0; rpsUpdateScore(); document.getElementById("rps-last").textContent=""; }
function rpsUpdateScore(){ document.getElementById("rps-you").textContent=rpsYou; document.getElementById("rps-bot").textContent=rpsBot; }
function rpsChoose(you){
  const choices=["rock","paper","scissors"];
  const bot=choices[Math.floor(Math.random()*3)];
  let msg=`Te: ${icon(you)} | G√©p: ${icon(bot)} ‚Üí `;
  if(you===bot){ msg+="D√∂ntetlen."; }
  else if(rpsWins[you]===bot){ // you win
    msg+="Nyert√©l! ";
    rpsYou += 1;
  }else{ // you lose
    msg+="Vesztett√©l. ";
    if(rpsMode==="modern"){ rpsYou -= 1; } // modern: vesztes -1 pont
    else { rpsBot += 1; }                  // classic: gy≈ëztes kap +1 (g√©p)
  }
  if(rpsMode==="modern" && rpsWins[you]===bot){ /* modernben a nyer√©s is +1 marad */ }
  else if(rpsMode==="modern" && you!==bot && rpsWins[you]!==bot){ /* g√©p nyert */ rpsBot += 1; }

  rpsUpdateScore(); document.getElementById("rps-last").textContent=msg;
}
function icon(x){ return x==="rock"?"‚úä":(x==="paper"?"üñê":"‚úå"); }
</script>

</body>
</html>

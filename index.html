<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vicck√∂zpont ‚Äì J√°t√©kok</title>

<!-- PWA manifest (k√©s≈ëbb t√∂ltj√ºk meg) -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#070b17">
<link rel="icon" href="/icons/icon-192.png">

<style>
:root{
  --bg:#070b17; --text:#e8edff; --muted:#a7b1d6; --line:rgba(255,255,255,.14);
  --glass:rgba(255,255,255,.06); --ok:#22c55e; --info:#60a5fa;
  --shadow:0 10px 30px rgba(0,0,0,.25);
}
*{box-sizing:border-box} html,body{height:100%;margin:0}
body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;overflow:hidden}
button{cursor:pointer} a{color:inherit;text-decoration:none}
#bg{position:fixed;inset:0;z-index:0}

/* Fels≈ë s√°v */
.appbar{position:fixed;left:0;right:0;top:0;z-index:3;display:none;
  padding:12px 16px;gap:10px;align-items:center;
  background:linear-gradient(180deg,rgba(12,18,36,.85),rgba(12,18,36,.55));
  border-bottom:1px solid var(--line);backdrop-filter:blur(10px)}
.logo{font-weight:900;letter-spacing:.2px}
.appbar .who{margin-left:auto;color:#cfe1ff;font-weight:700}

/* Login */
.auth{position:relative;z-index:2;max-width:480px;margin:100px auto;padding:24px;border-radius:18px;
  background:linear-gradient(180deg,rgba(255,255,255,.09),rgba(255,255,255,.05));
  border:1px solid var(--line);backdrop-filter:blur(12px); box-shadow:var(--shadow)}
label{display:block;font-weight:800;margin:12px 0 6px}
input{width:100%;padding:12px 14px;border-radius:14px;border:1px solid var(--line);background:rgba(255,255,255,.07);color:var(--text)}
.btn{padding:12px 16px;border:0;border-radius:14px;font-weight:900;transition:.2s transform}
.btn:hover{transform:translateY(-1px)} .full{width:100%}.green{background:#22c55e;color:#062215}

/* Loading */
#loading{position:fixed;inset:0;z-index:4;display:none;place-items:center;background:rgba(8,12,30,.6);backdrop-filter:blur(6px)}
.loader{padding:16px 20px;border-radius:14px;border:1px solid var(--line);
  background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.07));box-shadow:var(--shadow)}

/* Men√º + r√°cs */
#menu{position:fixed;inset:68px 0 0;z-index:2;display:none;overflow:auto;padding:18px}
.wrap{max-width:1180px;margin:6px auto 60px}
.tabs{position:static; display:flex; gap:10px; margin:0 0 18px; flex-wrap:wrap}
.tab{padding:10px 16px;border-radius:999px;border:1px solid var(--line);background:var(--glass);font-weight:800}
.tab.active{background:linear-gradient(90deg,#7c3aed,#22d3ee);color:#061225;border-color:transparent}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:22px}
@media (max-width:1100px){.grid{grid-template-columns:repeat(9,1fr)}}
@media (max-width:800px){.grid{grid-template-columns:repeat(6,1fr)}}
@media (max-width:560px){.grid{grid-template-columns:repeat(4,1fr)}}

.card{grid-column:span 4;border:1px solid var(--line);border-radius:16px;
  padding:16px;background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.07));
  backdrop-filter:blur(10px);box-shadow:var(--shadow);
  transition:.22s transform,.22s box-shadow}
.card:hover{transform:translateY(-4px);box-shadow:0 16px 40px rgba(0,0,0,.35)}
.card h3{margin:0 0 8px}.card p{margin:0 0 12px;color:var(--muted)}
.actions{display:flex;gap:10px;flex-wrap:wrap}
.chip{padding:9px 14px;border-radius:999px;border:1px solid var(--line);background:var(--glass);font-weight:800;transition:.2s transform}
.chip:hover{transform:translateY(-1px)}
.chip.ok{background:#22c55e;color:#062215;border-color:transparent}
.chip.info{background:#60a5fa;color:#071321;border-color:transparent}

/* Lenyithat√≥ ‚ÄûKomolyabb j√°t√©kok‚Äù blokk (fel√ºl) */
.adv-wrap{margin:8px 0 18px}
.coll-btn{
  padding:10px 16px;border-radius:12px;border:1px solid var(--line);
  background:linear-gradient(90deg,#7c3aed,#22d3ee);color:#061225;font-weight:900;
}
.coll-content{margin-top:12px;display:none}
.coll-content.open{display:block}

/* Panel keret ‚Äì a r√©szletes tartalmakhoz k√©s≈ëbb */
.panel{position:fixed;inset:0;z-index:5;display:none;place-items:center;background:rgba(3,6,14,.55);backdrop-filter:blur(4px);padding:14px}
.inner{width:min(980px,96vw);max-height:86vh;overflow:auto;border:1px solid var(--line);border-radius:18px;
  background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.07));box-shadow:var(--shadow)}
.titlebar{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)}
.close{border:1px solid var(--line);background:var(--glass);border-radius:12px;padding:9px 12px;font-weight:900}
.content{padding:14px}
.box{border:1px solid var(--line);border-radius:14px;background:rgba(10,12,22,.6);padding:12px}
</style>
</head>
<body>
<canvas id="bg"></canvas>

<header class="appbar" id="bar">
  <div class="logo">Vicck√∂zpont ‚Äì Mini j√°t√©kok</div>
  <div class="who" id="who"></div>
</header>

<main id="login" class="auth">
  <h2>Bejelentkez√©s</h2>
  <p style="color:var(--muted)">V√°lassz az alap vagy a komolyabb j√°t√©kok k√∂z√ºl! üéÆ</p>
  <form id="form" novalidate>
    <label for="n">N√©v</label><input id="n" required placeholder="N√©v">
    <label for="e">Email</label><input id="e" type="email" required placeholder="valami@email.hu">
    <label for="p">Jelsz√≥</label><input id="p" type="password" minlength="4" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button class="btn green full" type="submit">Bel√©pek</button>
    <div id="err" style="color:#fecaca;font-weight:800;margin-top:8px;min-height:18px"></div>
  </form>
</main>

<div id="loading"><div class="loader" id="loadTxt">Bet√∂lt√©s‚Ä¶</div></div>

<section id="menu">
  <div class="wrap">

    <!-- FEL√úL: lenyithat√≥ Komolyabb j√°t√©kok (ide j√∂n majd a platformer a 2. r√©szben) -->
    <div class="adv-wrap">
      <button id="advToggle" class="coll-btn">‚ñº Komolyabb j√°t√©kok</button>
      <div id="advContent" class="coll-content">
        <div class="box">Itt lesz a 2D platformer √©s a ‚Äûkomolyabb‚Äù cuccok. (A k√∂vetkez≈ë r√©szben)</div>
      </div>
    </div>

    <!-- ALUL: Alap / Komolyabb f√ºlek √©s k√°rty√°k -->
    <div class="tabs">
      <button class="tab active" data-tab="basic">Alap j√°t√©kok</button>
      <button class="tab" data-tab="adv">Komolyabb j√°t√©kok</button>
    </div>

    <div id="tab-basic" class="grid">
      <div class="card"><h3>‚ùå Am≈ëba</h3><p>J√°tssz a g√©p ellen vagy ketten.</p><div class="actions"><button class="chip ok" data-open="#panelTTT">Megnyit√°s</button></div></div>
      <div class="card"><h3>‚úä‚úã‚úå K≈ë‚ÄìPap√≠r‚ÄìOll√≥</h3><p>Gyors meccsek, pontsz√°mmal.</p><div class="actions"><button class="chip ok" data-open="#panelRPS">Megnyit√°s</button></div></div>
      <div class="card"><h3>üî¢ Sz√°mkital√°l√≥ (1‚Äì10)</h3><p>Tal√°ld el 5 pr√≥b√°b√≥l.</p><div class="actions"><button class="chip ok" data-open="#panelGuess">Megnyit√°s</button></div></div>
      <div class="card"><h3>ü™ô Kapar√≥s sorsjegy</h3><p>Kaparj √©s n√©zd meg, nyert√©l-e!</p><div class="actions"><button class="chip ok" data-open="#panelScratch">Megnyit√°s</button></div></div>
    </div>

    <div id="tab-adv" class="grid" style="display:none">
      <div class="card"><h3>üéØ Kv√≠z Bajnoks√°g</h3><p>15 k√©rd√©s ‚Ä¢ 15 mp/k√©rd√©s ‚Ä¢ Toplista</p><div class="actions"><button class="chip info" data-open="#panelQuiz">Megnyit√°s</button></div></div>
      <div class="card"><h3>üí¨ Chat</h3><p>Po√©nos v√°laszok, tipp √ºzenetek.</p><div class="actions"><button class="chip info" data-open="#panelChat">Megnyit√°s</button></div></div>
      <div class="card"><h3>üéµ Hangok & Id≈ëj√°r√°s</h3><p>Prank hang + po√©nos id≈ëj√°r√°s</p><div class="actions"><button class="chip info" data-open="#panelMedia">Megnyit√°s</button></div></div>
      <div class="card"><h3>üïπÔ∏è Runner</h3><p>Ugorj az akad√°lyok felett, gy≈±jts pontot!</p><div class="actions"><button class="chip info" data-open="#panelRun">Megnyit√°s</button></div></div>
      <div class="card"><h3>üèÜ Achievements</h3><p>Jelv√©nyek: kv√≠z, runner, kapar√≥s</p><div class="actions"><button class="chip info" data-open="#panelAch">Megnyit√°s</button></div></div>
    </div>

  </div>
</section>
<!-- ====== PANELEK ‚Äì ALAP J√ÅT√âKOK ====== -->

<!-- Am≈ëba -->
<div class="panel" id="panelTTT">
  <div class="inner">
    <div class="titlebar">
      <div class="title">‚ùå Am≈ëba</div>
      <button class="close" data-close>Bez√°r</button>
    </div>
    <div class="content">
      <div class="ttt-grid" id="ttt" style="display:grid;grid-template-columns:repeat(3,110px);grid-template-rows:repeat(3,110px);gap:10px;justify-content:center"></div>
      <div class="box" id="tttInfo" style="margin-top:10px;text-align:center">Te kezdesz: X</div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap">
        <button class="chip info" id="tttNew">√öjrakezd</button>
        <label style="display:flex;gap:6px;align-items:center">
          <input type="checkbox" id="tttCpu" checked>
          <span style="color:#a7b1d6">J√°t√©k a g√©p ellen</span>
        </label>
      </div>
    </div>
  </div>
</div>

<!-- K≈ë‚ÄìPap√≠r‚ÄìOll√≥ -->
<div class="panel" id="panelRPS">
  <div class="inner">
    <div class="titlebar">
      <div class="title">‚úä‚úã‚úå K≈ë‚ÄìPap√≠r‚ÄìOll√≥</div>
      <button class="close" data-close>Bez√°r</button>
    </div>
    <div class="content">
      <div class="box" id="rpsInfo">Els≈ë 5-ig megy. Te: 0 ‚Äì G√©p: 0</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <button class="chip ok" data-rps="rock">‚úä K≈ë</button>
        <button class="chip info" data-rps="paper">‚úã Pap√≠r</button>
        <button class="chip" data-rps="scissors">‚úå Oll√≥</button>
        <button class="chip" id="rpsReset">√öjrakezd</button>
      </div>
      <div class="box" id="rpsLog" style="margin-top:12px;max-height:240px;overflow:auto"></div>
    </div>
  </div>
</div>

<!-- Sz√°mkital√°l√≥ -->
<div class="panel" id="panelGuess">
  <div class="inner">
    <div class="titlebar">
      <div class="title">üî¢ Sz√°mkital√°l√≥ (1‚Äì10)</div>
      <button class="close" data-close>Bez√°r</button>
    </div>
    <div class="content">
      <div class="box" id="gInfo">Gondoltam egy sz√°mra 1 √©s 10 k√∂z√∂tt. Van 5 tipped. üòâ</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <input id="gInput" type="number" min="1" max="10" placeholder="1..10" style="width:130px">
        <button class="chip ok" id="gTry">Tipp</button>
        <button class="chip" id="gNew">√öj j√°t√©k</button>
      </div>
      <div class="box" id="gLog" style="margin-top:12px;max-height:240px;overflow:auto"></div>
    </div>
  </div>
</div>

<!-- Kapar√≥s sorsjegy -->
<div class="panel" id="panelScratch">
  <div class="inner">
    <div class="titlebar">
      <div class="title">ü™ô Kapar√≥s sorsjegy</div>
      <button class="close" data-close>Bez√°r</button>
    </div>
    <div class="content">
      <div id="scratchWrap" style="display:flex;gap:14px;flex-wrap:wrap;align-items:flex-start">
        <div style="position:relative; width:340px; height:200px; border-radius:16px; overflow:hidden; box-shadow:0 10px 28px rgba(0,0,0,.28); border:1px solid var(--line);">
          <div id="scratchPrize" style="position:absolute; inset:0; display:grid; place-items:center;
               background:linear-gradient(135deg,#111827,#0b1733); color:#fff; text-align:center; padding:16px;">
            <div>
              <div style="font-size:48px; line-height:1.1;" id="prizeEmoji">üéÅ</div>
              <div style="margin-top:8px; font-weight:900; font-size:20px" id="prizeText">Nyerem√©ny‚Ä¶</div>
              <div style="margin-top:4px; color:#a7b1d6" id="prizeSub">Kaparj a felfed√©shez!</div>
            </div>
          </div>
          <canvas id="scratchCanvas" width="340" height="200" style="position:absolute; inset:0;"></canvas>
        </div>
        <div style="flex:1; min-width:240px;">
          <div class="box" id="scratchInfo">H√∫zd az egeret (vagy az ujjad) a k√°rty√°n, hogy lekapard a r√©teget!</div>
          <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap">
            <button class="chip ok" id="scratchNew">√öj k√°rtya</button>
            <button class="chip" id="scratchReveal">Mutasd meg</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ====== PANELEK ‚Äì HELYFOGLAL√ìK a k√∂vetkez≈ë r√©szekhez ====== -->
<div class="panel" id="panelQuiz"><div class="inner"><div class="titlebar"><div class="title">üéØ Kv√≠z</div><button class="close" data-close>Bez√°r</button></div><div class="content"><div class="box">A kv√≠z logika a 4/5 r√©szben √©rkezik.</div></div></div></div>
<div class="panel" id="panelChat"><div class="inner"><div class="titlebar"><div class="title">üí¨ Chat</div><button class="close" data-close>Bez√°r</button></div><div class="content"><div class="box">A chat a 4/5 r√©szben √©rkezik.</div></div></div></div>
<div class="panel" id="panelMedia"><div class="inner"><div class="titlebar"><div class="title">üéµ Hangok & Id≈ëj√°r√°s</div><button class="close" data-close>Bez√°r</button></div><div class="content"><div class="box">A hang+id≈ëj√°r√°s a 4/5 r√©szben √©rkezik.</div></div></div></div>
<div class="panel" id="panelRun"><div class="inner"><div class="titlebar"><div class="title">üïπÔ∏è Runner</div><button class="close" data-close>Bez√°r</button></div><div class="content"><div class="box">A runner a 4/5 r√©szben √©rkezik.</div></div></div></div>
<div class="panel" id="panelAch"><div class="inner"><div class="titlebar"><div class="title">üèÜ Jelv√©nyek</div><button class="close" data-close>Bez√°r</button></div><div class="content"><div class="box">Achievements a 5/5 r√©szben.</div></div></div></div>

<!-- ====== ALAP JS: login, f√ºlek, panelek, lenyit√°s ====== -->
<script>
const qs=s=>document.querySelector(s), qsa=s=>document.querySelectorAll(s);

/* Login alap */
const login=qs('#login'), bar=qs('#bar'), who=qs('#who'), menu=qs('#menu'), loading=qs('#loading'), loadTxt=qs('#loadTxt');
qs('#form').addEventListener('submit',e=>{
  e.preventDefault();
  const n=qs('#n').value.trim(), m=qs('#e').value.trim(), p=qs('#p').value.trim(), err=qs('#err');
  err.textContent='';
  if(!n||!m.includes('@')||p.length<4){err.textContent='Ellen≈ërizd a mez≈ëket!';return;}
  loading.style.display='grid';
  const lines=["K√°v√© meleg√≠t√©se‚Ä¶","J√°t√©kok pol√≠roz√°sa‚Ä¶","Po√©nmotor beind√≠t√°sa‚Ä¶"];let i=0;
  const iv=setInterval(()=>loadTxt.textContent=lines[i++%lines.length],700);
  setTimeout(()=>{clearInterval(iv);loading.style.display='none';login.style.display='none';bar.style.display='flex';menu.style.display='block';who.textContent='√údv, '+n+'!';},1100);
});

/* F√ºlek */
qsa('.tab').forEach(t=>t.addEventListener('click',()=>{
  qsa('.tab').forEach(z=>z.classList.remove('active'));
  t.classList.add('active');
  qs('#tab-basic').style.display = t.dataset.tab==='basic' ? 'grid' : 'none';
  qs('#tab-adv').style.display   = t.dataset.tab==='adv'   ? 'grid' : 'none';
}));

/* Panelek nyit/z√°r */
qsa('[data-open]').forEach(b=>b.addEventListener('click',()=>{
  const p=qs(b.getAttribute('data-open')); if(p) p.style.display='grid';
}));
qsa('[data-close]').forEach(b=>b.addEventListener('click',()=>b.closest('.panel').style.display='none'));
qsa('.panel').forEach(p=>p.addEventListener('click',e=>{ if(e.target===p) p.style.display='none'; }));

/* Fel√ºl: Komolyabb j√°t√©kok lenyit√≥ */
(function(){
  const btn = document.getElementById('advToggle');
  const box = document.getElementById('advContent');
  if(!btn || !box) return;
  btn.addEventListener('click', ()=>{
    box.classList.toggle('open');
    btn.textContent = (box.classList.contains('open') ? '‚ñ≤' : '‚ñº') + ' Komolyabb j√°t√©kok';
  });
})();
</script>
<script>
/* === AM≈êBA === */
(function(){
  const grid=qs('#ttt'), info=qs('#tttInfo'), cpu=qs('#tttCpu'), newBtn=qs('#tttNew');
  let cells, turn, board;
  function start(){
    grid.innerHTML=''; board=Array(9).fill(null); turn='X'; info.textContent='Te kezdesz: X';
    for(let i=0;i<9;i++){
      const cell=document.createElement('button');
      cell.className='box';
      cell.style.fontSize='40px';
      cell.onclick=()=>move(i);
      grid.appendChild(cell);
    }
    cells=[...grid.children];
  }
  function move(i){
    if(board[i]) return;
    board[i]=turn;
    cells[i].textContent=turn;
    if(check(turn)) return win(turn);
    turn=turn==='X'?'O':'X';
    info.textContent='K√∂vetkez≈ë: '+turn;
    if(turn==='O' && cpu.checked) cpuMove();
  }
  function cpuMove(){
    let empty=board.map((v,i)=>v?null:i).filter(v=>v!==null);
    let pick=empty[Math.floor(Math.random()*empty.length)];
    setTimeout(()=>move(pick),500);
  }
  function check(p){return[0,1,2,3,4,5,6,7].some(r=>{
    const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    return lines.some(line=>line.every(idx=>board[idx]===p));
  });}
  function win(p){info.textContent=(p==='X'?'Nyert√©l!':'Vesztett√©l!')+' Gratul√°lok √ºgyes vagy!';}
  newBtn.onclick=start;
  start();
})();

/* === K≈ê-PAP√çR-OLL√ì === */
(function(){
  const log=qs('#rpsLog'), info=qs('#rpsInfo'), reset=qs('#rpsReset');
  let scoreP=0, scoreC=0;
  function play(choice){
    const options=['rock','paper','scissors'];
    const ai=options[Math.floor(Math.random()*3)];
    const res=(choice===ai)?'D√∂ntetlen':
      (choice==='rock'&&ai==='scissors'||
       choice==='paper'&&ai==='rock'||
       choice==='scissors'&&ai==='paper')?'Nyert√©l!':'Vesztett√©l!';
    if(res==='Nyert√©l!') scoreP++;
    else if(res==='Vesztett√©l!') scoreC++;
    info.textContent=`Els≈ë 5-ig megy. Te: ${scoreP} ‚Äì G√©p: ${scoreC}`;
    log.innerHTML+=`<div>Te: ${choice}, G√©p: ${ai} ‚Üí ${res}</div>`;
    if(scoreP>=5||scoreC>=5){
      log.innerHTML+=`<div><b>J√°t√©k v√©ge: ${scoreP>scoreC?'Gy≈ëzelem!':'Veres√©g!'}</b></div>`;
    }
  }
  qsa('[data-rps]').forEach(b=>b.onclick=()=>play(b.dataset.rps));
  reset.onclick=()=>{scoreP=0;scoreC=0;log.innerHTML='';info.textContent='Els≈ë 5-ig megy. Te: 0 ‚Äì G√©p: 0';};
})();

/* === SZ√ÅMKITAL√ÅL√ì === */
(function(){
  const info=qs('#gInfo'), log=qs('#gLog'), input=qs('#gInput'), tryB=qs('#gTry'), newB=qs('#gNew');
  let num, tries;
  function start(){ num=Math.floor(Math.random()*10)+1; tries=5; log.innerHTML=''; info.textContent='Gondoltam egy sz√°mra 1 √©s 10 k√∂z√∂tt. Van 5 tipped.'; }
  tryB.onclick=()=>{
    const v=parseInt(input.value); if(!v||v<1||v>10) return;
    tries--;
    if(v===num){ log.innerHTML+=`<div>Tal√°lt! üéØ</div>`; info.textContent='Nyert√©l!'; }
    else if(tries<=0){ log.innerHTML+=`<div>Elfogyott a tipped. A sz√°m: ${num}</div>`; info.textContent='Vesztett√©l!'; }
    else { log.innerHTML+=`<div>${v} ‚Äì ${v<num?'Nagyobbra':'Kisebbre'} gondoltam.</div>`; info.textContent=`${tries} tipped maradt.`; }
    input.value='';
  };
  newB.onclick=start;
  start();
})();

/* === KAPAR√ìS SORSJEGY === */
(function(){
  const canvas=qs('#scratchCanvas'), ctx=canvas.getContext('2d'),
        prizeEmoji=qs('#prizeEmoji'), prizeText=qs('#prizeText'), prizeSub=qs('#prizeSub'),
        info=qs('#scratchInfo'), newB=qs('#scratchNew'), revealB=qs('#scratchReveal');
  const prizes=[['ü•ñ','Nyert√©l egy szelet kenyeret!'],['üçå','Egy ban√°n a ti√©d!'],['üöó','Nyert√©l egy matchbox aut√≥t!'],['üí©','Sajnos ez most nem nyerem√©ny.']];
  let isDrawing=false, lastX,lastY;
  function pickPrize(){
    const [em,txt]=prizes[Math.floor(Math.random()*prizes.length)];
    prizeEmoji.textContent=em; prizeText.textContent=txt; prizeSub.textContent='Kaparj a felfed√©shez!';
  }
  function cover(){
    ctx.fillStyle='#ccc'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.globalCompositeOperation='destination-out';
  }
  function scratch(e){
    if(!isDrawing) return;
    const rect=canvas.getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
    ctx.beginPath();
    ctx.arc(x,y,20,0,Math.PI*2);
    ctx.fill();
  }
  canvas.addEventListener('mousedown',e=>{isDrawing=true; scratch(e);});
  canvas.addEventListener('touchstart',e=>{isDrawing=true; scratch(e);});
  canvas.addEventListener('mousemove',scratch);
  canvas.addEventListener('touchmove',scratch);
  ['mouseup','mouseleave','touchend'].forEach(ev=>canvas.addEventListener(ev,()=>isDrawing=false));
  newB.onclick=()=>{ctx.globalCompositeOperation='source-over';pickPrize();cover();};
  revealB.onclick=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);};
  pickPrize();cover();
})();
</script>
<script>
/* === AM≈êBA === */
(function(){
  const grid=qs('#ttt'), info=qs('#tttInfo'), cpu=qs('#tttCpu'), newBtn=qs('#tttNew');
  let cells, turn, board;
  function start(){
    grid.innerHTML=''; board=Array(9).fill(null); turn='X'; info.textContent='Te kezdesz: X';
    for(let i=0;i<9;i++){
      const cell=document.createElement('button');
      cell.className='box';
      cell.style.fontSize='40px';
      cell.onclick=()=>move(i);
      grid.appendChild(cell);
    }
    cells=[...grid.children];
  }
  function move(i){
    if(board[i]) return;
    board[i]=turn;
    cells[i].textContent=turn;
    if(check(turn)) return win(turn);
    turn=turn==='X'?'O':'X';
    info.textContent='K√∂vetkez≈ë: '+turn;
    if(turn==='O' && cpu.checked) cpuMove();
  }
  function cpuMove(){
    let empty=board.map((v,i)=>v?null:i).filter(v=>v!==null);
    let pick=empty[Math.floor(Math.random()*empty.length)];
    setTimeout(()=>move(pick),500);
  }
  function check(p){return[0,1,2,3,4,5,6,7].some(r=>{
    const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    return lines.some(line=>line.every(idx=>board[idx]===p));
  });}
  function win(p){info.textContent=(p==='X'?'Nyert√©l!':'Vesztett√©l!')+' Gratul√°lok √ºgyes vagy!';}
  newBtn.onclick=start;
  start();
})();

/* === K≈ê-PAP√çR-OLL√ì === */
(function(){
  const log=qs('#rpsLog'), info=qs('#rpsInfo'), reset=qs('#rpsReset');
  let scoreP=0, scoreC=0;
  function play(choice){
    const options=['rock','paper','scissors'];
    const ai=options[Math.floor(Math.random()*3)];
    const res=(choice===ai)?'D√∂ntetlen':
      (choice==='rock'&&ai==='scissors'||
       choice==='paper'&&ai==='rock'||
       choice==='scissors'&&ai==='paper')?'Nyert√©l!':'Vesztett√©l!';
    if(res==='Nyert√©l!') scoreP++;
    else if(res==='Vesztett√©l!') scoreC++;
    info.textContent=`Els≈ë 5-ig megy. Te: ${scoreP} ‚Äì G√©p: ${scoreC}`;
    log.innerHTML+=`<div>Te: ${choice}, G√©p: ${ai} ‚Üí ${res}</div>`;
    if(scoreP>=5||scoreC>=5){
      log.innerHTML+=`<div><b>J√°t√©k v√©ge: ${scoreP>scoreC?'Gy≈ëzelem!':'Veres√©g!'}</b></div>`;
    }
  }
  qsa('[data-rps]').forEach(b=>b.onclick=()=>play(b.dataset.rps));
  reset.onclick=()=>{scoreP=0;scoreC=0;log.innerHTML='';info.textContent='Els≈ë 5-ig megy. Te: 0 ‚Äì G√©p: 0';};
})();

/* === SZ√ÅMKITAL√ÅL√ì === */
(function(){
  const info=qs('#gInfo'), log=qs('#gLog'), input=qs('#gInput'), tryB=qs('#gTry'), newB=qs('#gNew');
  let num, tries;
  function start(){ num=Math.floor(Math.random()*10)+1; tries=5; log.innerHTML=''; info.textContent='Gondoltam egy sz√°mra 1 √©s 10 k√∂z√∂tt. Van 5 tipped.'; }
  tryB.onclick=()=>{
    const v=parseInt(input.value); if(!v||v<1||v>10) return;
    tries--;
    if(v===num){ log.innerHTML+=`<div>Tal√°lt! üéØ</div>`; info.textContent='Nyert√©l!'; }
    else if(tries<=0){ log.innerHTML+=`<div>Elfogyott a tipped. A sz√°m: ${num}</div>`; info.textContent='Vesztett√©l!'; }
    else { log.innerHTML+=`<div>${v} ‚Äì ${v<num?'Nagyobbra':'Kisebbre'} gondoltam.</div>`; info.textContent=`${tries} tipped maradt.`; }
    input.value='';
  };
  newB.onclick=start;
  start();
})();

/* === KAPAR√ìS SORSJEGY === */
(function(){
  const canvas=qs('#scratchCanvas'), ctx=canvas.getContext('2d'),
        prizeEmoji=qs('#prizeEmoji'), prizeText=qs('#prizeText'), prizeSub=qs('#prizeSub'),
        info=qs('#scratchInfo'), newB=qs('#scratchNew'), revealB=qs('#scratchReveal');
  const prizes=[['ü•ñ','Nyert√©l egy szelet kenyeret!'],['üçå','Egy ban√°n a ti√©d!'],['üöó','Nyert√©l egy matchbox aut√≥t!'],['üí©','Sajnos ez most nem nyerem√©ny.']];
  let isDrawing=false, lastX,lastY;
  function pickPrize(){
    const [em,txt]=prizes[Math.floor(Math.random()*prizes.length)];
    prizeEmoji.textContent=em; prizeText.textContent=txt; prizeSub.textContent='Kaparj a felfed√©shez!';
  }
  function cover(){
    ctx.fillStyle='#ccc'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.globalCompositeOperation='destination-out';
  }
  function scratch(e){
    if(!isDrawing) return;
    const rect=canvas.getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
    ctx.beginPath();
    ctx.arc(x,y,20,0,Math.PI*2);
    ctx.fill();
  }
  canvas.addEventListener('mousedown',e=>{isDrawing=true; scratch(e);});
  canvas.addEventListener('touchstart',e=>{isDrawing=true; scratch(e);});
  canvas.addEventListener('mousemove',scratch);
  canvas.addEventListener('touchmove',scratch);
  ['mouseup','mouseleave','touchend'].forEach(ev=>canvas.addEventListener(ev,()=>isDrawing=false));
  newB.onclick=()=>{ctx.globalCompositeOperation='source-over';pickPrize();cover();};
  revealB.onclick=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);};
  pickPrize();cover();
})();
</script>
<!-- ===== Toast √©rtes√≠t√©sek kont√©ner ===== -->
<div id="toasts" style="position:fixed;right:16px;bottom:16px;z-index:9999;display:flex;flex-direction:column;gap:10px"></div>

<style>
/* Achievements panel k√°rty√°i */
#panelAch .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
#panelAch .ach{grid-column:span 4;border:1px solid var(--line);border-radius:14px;padding:12px;background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.07))}
#panelAch .ach.locked{opacity:.58;filter:grayscale(1)}
/* Toast doboz */
.toast{border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:linear-gradient(180deg,rgba(255,255,255,.14),rgba(255,255,255,.09));box-shadow:0 10px 24px rgba(0,0,0,.35)}
</style>

<script>
/* ===== Sz√≠nes ‚Äûfoly√≥‚Äù h√°tt√©r anim√°ci√≥ a #bg v√°sznon ===== */
(function(){
  const c=document.getElementById('bg'); if(!c) return; const x=c.getContext('2d');
  let w=innerWidth,h=innerHeight; c.width=w; c.height=h;
  addEventListener('resize',()=>{w=innerWidth;h=innerHeight;c.width=w;c.height=h});
  const N=90, pts=[];
  for(let i=0;i<N;i++){
    pts.push({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-0.5)*0.6,vy:(Math.random()-0.5)*0.6});
  }
  function grad(t){ // lila ‚Üí ci√°n √°tmenet hull√°mozva
    const a=0.5+0.5*Math.sin(t*0.0012), b=0.5+0.5*Math.cos(t*0.0015);
    const g=x.createLinearGradient(0,0,w,h);
    g.addColorStop(0,`rgba(${120+80*a|0},${60|0},${237|0},0.25)`);
    g.addColorStop(1,`rgba(${34|0},${210+40*b|0},${238|0},0.25)`);
    return g;
  }
  function loop(t){
    x.clearRect(0,0,w,h);
    x.fillStyle='#0a0f22'; x.fillRect(0,0,w,h);
    // l√°gy mez≈ë (metaballs jelleg)
    x.globalCompositeOperation='lighter';
    for(const p of pts){
      p.x+=p.vx; p.y+=p.vy;
      if(p.x< -50||p.x>w+50) p.vx*=-1;
      if(p.y< -50||p.y>h+50) p.vy*=-1;
      const r=40;
      const g=grad(t);
      x.fillStyle=g;
      x.beginPath(); x.arc(p.x,p.y,r,0,Math.PI*2); x.fill();
    }
    x.globalCompositeOperation='source-over';
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* ===== Achievements + Toast ===== */
const Ach=(function(){
  const KEY='achV1';
  const defs=[
    {id:'quiz_10',name:'Kv√≠z 10/15',desc:'√ârj el legal√°bb 10 pontot a kv√≠zben.'},
    {id:'quiz_15',name:'Kv√≠z 15/15',desc:'Minden v√°lasz helyes!'},
    {id:'run_20', name:'Runner 20', desc:'√ârj el 20 pontot a Runnerben.'},
    {id:'run_50', name:'Runner 50', desc:'√ârj el 50 pontot a Runnerben.'},
    {id:'scratch_win',name:'Szerencse fia',desc:'Nyer≈ë kapar√≥s sorsjegy.'}
  ];
  const read=()=>JSON.parse(localStorage.getItem(KEY)||'{}');
  const write=v=>localStorage.setItem(KEY,JSON.stringify(v));
  let state=read();

  function toast(txt){
    const wrap=document.getElementById('toasts'); if(!wrap) return;
    const t=document.createElement('div'); t.className='toast'; t.textContent='üèÜ '+txt;
    wrap.appendChild(t);
    setTimeout(()=>{t.style.transition='opacity .3s, transform .3s'; t.style.opacity='0'; t.style.transform='translateY(8px)';
      setTimeout(()=>wrap.removeChild(t),320);
    },1800);
  }
  function unlock(id){
    if(state[id]) return false;
    state[id]=Date.now(); write(state);
    const meta=defs.find(d=>d.id===id);
    toast('Jelv√©ny: '+(meta?meta.name:id));
    render();
    return true;
  }
  function render(){
    const cont=document.querySelector('#panelAch .content'); if(!cont) return;
    const grid=document.createElement('div'); grid.className='grid';
    const s=read();
    grid.innerHTML=defs.map(d=>{
      const ok=!!s[d.id];
      return `<div class="ach ${ok?'':'locked'}">
        <div style="font-weight:900;margin-bottom:6px">${d.name}</div>
        <div style="color:${ok?'#cfe1ff':'#a7b1d6'}">${d.desc}</div>
        <div style="margin-top:8px;font-size:12px;color:#a7b1d6">${ok?'Megszerezve: '+new Date(s[d.id]).toLocaleString('hu-HU'):'Nincs meg'}</div>
      </div>`;
    }).join('');
    cont.innerHTML=''; cont.appendChild(grid);
  }
  document.addEventListener('DOMContentLoaded',render);
  return {unlock,render};
})();

/* ===== Mini hookok Ach-hez (opcion√°lis) =====
   Tipp: k√©s≈ëbb a kv√≠z finish() v√©g√©re tedd be:
     if(score>=10) Ach.unlock('quiz_10');
     if(score>=15) Ach.unlock('quiz_15');
   A Runner k√≥dba (pontsz√°m n≈ë): if(score>=20) Ach.unlock('run_20'); if(score>=50) Ach.unlock('run_50');
   A Kapar√≥sban, ha nyer: Ach.unlock('scratch_win');
*/

/* ===== PWA ‚Äì service worker regisztr√°ci√≥ ===== */
if('serviceWorker' in navigator){
  window.addEventListener('load',()=>{
    navigator.serviceWorker.register('/service-worker.js').catch(console.error);
  });
}
</script>

<!-- ===== K√úL√ñN F√ÅJLOK (m√°sold a rep√≥ba) =====
1) manifest.json
{
  "name": "Vicck√∂zpont ‚Äì Mini j√°t√©kok",
  "short_name": "Viccek&J√°t√©k",
  "start_url": "/",
  "scope": "/",
  "display": "standalone",
  "background_color": "#070b17",
  "theme_color": "#070b17",
  "description": "Vicces mini-j√°t√©kok: kv√≠z, am≈ëba, kapar√≥s, KPO, runner, platformer.",
  "icons": [
    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}

2) service-worker.js
// v1 ‚Äì alap offline cache
const CACHE_NAME='viccek-cache-v1';
const ASSETS=[
  '/', '/manifest.json', '/service-worker.js',
  '/prank_short.mp3','/tehetseges.mp3.m4a',
  '/icons/icon-192.png','/icons/icon-512.png'
];
self.addEventListener('install',e=>{
  e.waitUntil(caches.open(CACHE_NAME).then(c=>c.addAll(ASSETS)));
  self.skipWaiting();
});
self.addEventListener('activate',e=>{
  e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>k!==CACHE_NAME&&caches.delete(k)))));
  self.clients.claim();
});
self.addEventListener('fetch',e=>{
  if(e.request.method!=='GET') return;
  e.respondWith(
    fetch(e.request).then(res=>{
      const copy=res.clone(); caches.open(CACHE_NAME).then(c=>c.put(e.request,copy)); return res;
    }).catch(()=>caches.match(e.request).then(r=>r||caches.match('/')))
  );
});

3) Ikonok: hozd l√©tre /icons/icon-192.png √©s /icons/icon-512.png
-->

</body>
</html>

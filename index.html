<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tam√°s Mesters√©ges (AI)</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2242%22 fill=%22%23ffb44d%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 font-size=%2248%22 font-family=%22Arial%22 fill=%22%23000%22>AI</text></svg>">

  <style>
    :root{
      --bg: #0b0d12;
      --text: #eaf0f7;
      --muted: #a5afbf;
      --brand: #ffb44d;
      --brand-2: #ff8c3a;

      /* √úveges k√°rty√°k ‚Äì enyhe, √°tl√°tsz√≥ */
      --glass-bg: rgba(16,18,24,0.45);
      --glass-brd: rgba(255,255,255,0.20);
      --glass-blur: 6px;
      --radius: 18px;

      /* Layout m√©retek */
      --header-h: 88px;
      --footer-h: 82px;
      --content-w: min(900px, 92vw);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background: var(--bg) center/cover fixed no-repeat;
      background-image: url('bg_tamas.jpg');
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* s√∂t√©t/f√©nyes v√°lt√°s ‚Äì marad */
    .theme-toggle{
      position:absolute; right:18px; top:18px; z-index:20;
      padding:10px 14px; border-radius:14px; color:#111;
      background:#fff; opacity:.92; border:1px solid #0003;
      font-weight:600;
    }

    /* √úveges fejl√©c */
    header{
      position:sticky; top:0; z-index:15;
      display:flex; align-items:center; gap:18px;
      width:100%; padding:14px 18px;
    }
    .header-card{
      width:var(--content-w);
      margin:0 auto; padding:18px 20px 16px;
      background:var(--glass-bg);
      border:1px solid var(--glass-brd);
      border-radius:calc(var(--radius) + 6px);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    h1{margin:0 0 6px; font-size:clamp(22px,4.5vw,34px)}
    .sub{color:var(--muted); font-size:.96rem}

    /* Tartalom ‚Äì a header alatt hagyunk fix helyet */
    main{
      padding: calc(var(--header-h) - 18px) 0 0;
      min-height: calc(100dvh - var(--footer-h));
    }
    .chat-wrap{
      width:var(--content-w);
      margin: 10px auto 110px;
      display:flex; flex-direction:column; gap:14px;
      padding: 0 8px;
    }

    /* √úzenet bubor√©kok */
    .msg{
      max-width: 100%;
      padding: 16px 18px;
      border-radius: var(--radius);
      background: var(--glass-bg);
      border: 1px solid var(--glass-brd);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 8px 24px rgba(0,0,0,.22);
      word-wrap:break-word;
    }
    .msg.bot{ align-self:flex-start }
    .msg.user{
      align-self:flex-end;
      background: linear-gradient(180deg,var(--brand),var(--brand-2));
      color:#1c1203; border:none; box-shadow: 0 8px 22px rgba(255,140,58,.35);
    }

    /* Bot akci√≥gombok ‚Äì FELolvas√°s / M√°sol√°s ‚Äì a bot √ºzenet alatt */
    .actions{
      display:flex; gap:12px; flex-wrap:wrap;
      margin: -6px 0 4px; /* k√∂zelebb az √ºzenethez */
    }
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius: 14px;
      background: var(--glass-bg);
      border:1px solid var(--glass-brd);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      color:var(--text); cursor:pointer; user-select:none;
      box-shadow: 0 4px 14px rgba(0,0,0,.18);
      font-weight:600;
    }
    .chip:active{ transform: translateY(1px) }

    /* Javasolt k√©rd√©s chipek ‚Äì maradnak, de nem l√≥gnak r√° semmire */
    .suggest{
      display:flex; flex-wrap:wrap; gap:12px;
      width:var(--content-w); margin: 6px auto 0; padding:0 8px;
    }
    .sugg{ padding:10px 14px; border-radius: 999px;
      background: rgba(255,255,255,.12); border:1px dashed rgba(255,255,255,.25);
      backdrop-filter: blur(4px); color:#fff; cursor:pointer
    }

    /* Fix als√≥ s√°v */
    footer{
      position:fixed; left:0; right:0; bottom:0; z-index:12;
      padding:10px 10px 14px;
      background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(8,10,14,.75) 32%, rgba(8,10,14,.95) 100%);
    }
    .inputbar{
      width:var(--content-w); margin:0 auto;
      display:flex; gap:10px; align-items:center;
      background: var(--glass-bg);
      border:1px solid var(--glass-brd);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      padding:8px; border-radius: 999px;
      box-shadow: 0 8px 28px rgba(0,0,0,.35);
    }
    .inputbar input{
      flex:1; background: transparent; border:0; outline:0;
      color:var(--text); padding:12px 14px; font-size:1rem;
    }
    button.send{
      padding:12px 18px; border:0; border-radius: 16px;
      background: linear-gradient(180deg,var(--brand),var(--brand-2));
      color:#1c1203; font-weight:800; cursor:pointer;
      box-shadow: 0 10px 22px rgba(255,140,58,.4);
    }

    /* Copyright ‚Äì fixen alul, a footer alatt l√°tszik mobilon is */
    .copyright{
      position:fixed; left:0; right:0; bottom: calc(var(--footer-h) - 10px);
      text-align:center; color:#e9edf5; opacity:.85;
      text-shadow: 0 2px 10px rgba(0,0,0,.6);
      font-size:.92rem; pointer-events:none;
    }

    /* Reszponz√≠v apr√≥s√°gok */
    @media (max-width: 480px){
      :root{ --header-h: 94px; }
      h1{font-size:26px}
      .chip{padding:9px 12px}
    }
  </style>
</head>
<body>

  <button class="theme-toggle" id="themeBtn">Light / Dark<br><small>(auto)</small></button>

  <header>
    <div class="header-card">
      <h1>Tam√°s Mesters√©ges (AI)</h1>
      <div class="sub">Halad√≥ fejleszt√©s ‚Äî bar√°ts√°gos magyar asszisztens</div>
    </div>
  </header>

  <main>
    <div class="chat-wrap" id="chat">
      <div class="msg bot">
        Szia! Itt vagyok neked, seg√≠tek mindenben. √çrj b√°tran! üòä
      </div>
      <div class="actions">
        <div class="chip" id="read0">üîä Felolvas√°s</div>
        <div class="chip" id="copy0">üìã M√°sol√°s</div>
      </div>
    </div>

    <!-- javaslatok ‚Äì maradnak, nem l√≥gnak r√° semmire -->
    <div class="suggest" id="suggest">
      <div class="sugg">Mes√©lj Horv√°th Tam√°sr√≥l r√∂viden!</div>
      <div class="sugg">Milyen modell vagy?</div>
      <div class="sugg">Mi a mai d√°tum?</div>
      <div class="sugg">Mit tudsz csin√°lni?</div>
    </div>
  </main>

  <footer>
    <div class="inputbar">
      <input id="inp" placeholder="√çrj ide‚Ä¶  Enter = k√ºld√©s" autocomplete="off" />
      <button class="send" id="sendBtn">K√ºld√©s</button>
    </div>
  </footer>

  <div class="copyright">¬© Tam√°s AI ‚Äî v√©dett oldal. B√°rmilyen m√°sol√°s jogs√©rt√©snek min≈ës√ºl.</div>

<script>
(() => {
  const chat   = document.getElementById('chat');
  const inp    = document.getElementById('inp');
  const send   = document.getElementById('sendBtn');
  const sugg   = document.getElementById('suggest');
  const themeBtn = document.getElementById('themeBtn');

  // --- Light/Dark (auto) ---
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
  function applyTheme(){
    const dark = localStorage.getItem('t_theme') ?? (prefersDark.matches ? 'dark' : 'light');
    document.documentElement.classList.toggle('light', dark==='light');
    themeBtn.innerHTML = (dark==='light' ? 'Dark' : 'Light') + ' / ' + (prefersDark.matches ? 'Dark' : 'Light') + '<br><small>(auto)</small>';
  }
  themeBtn.onclick = () => {
    const cur = document.documentElement.classList.contains('light') ? 'light' : 'dark';
    const next = cur==='light' ? 'dark':'light';
    localStorage.setItem('t_theme', next);
    applyTheme();
  };
  applyTheme();

  function addMsg(text, who='user'){
    const m = document.createElement('div');
    m.className = 'msg ' + (who==='user' ? 'user' : 'bot');
    m.textContent = text;
    chat.appendChild(m);

    if (who==='bot'){
      const act = document.createElement('div');
      act.className = 'actions';
      act.innerHTML = `
        <div class="chip">üîä Felolvas√°s</div>
        <div class="chip">üìã M√°sol√°s</div>`;
      const readBtn = act.children[0];
      const copyBtn = act.children[1];
      readBtn.onclick = () => speak(text);
      copyBtn.onclick = async () => { try{ await navigator.clipboard.writeText(text); copyBtn.textContent='‚úÖ M√°solva'; setTimeout(()=>copyBtn.innerHTML='üìã M√°sol√°s',1400);}catch{} };
      chat.appendChild(act);
    }

    // extra als√≥ t√©rk√∂z, hogy a footer ne takarja
    document.scrollingElement.scrollTo({top: document.body.scrollHeight, behavior:'smooth'});
  }

  function speak(t){
    try{
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(t);
      u.lang = 'hu-HU';
      window.speechSynthesis.speak(u);
    }catch{}
  }

  // K√ºld√©s
  async function handleSend(text){
    if(!text.trim()) return;
    addMsg(text, 'user');
    inp.value='';

    // k√©r√©s Netlify fel√©
    let reply = '';
    try{
      const r = await fetch('/.netlify/functions/chat', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message: text })
      });
      if(!r.ok) throw new Error('HTTP '+r.status);
      const data = await r.json();
      reply = (data && data.reply) ? data.reply : '';
    }catch(e){
      // bar√°ts√°gos fallback ‚Äì NEM fagy le
      reply = 'Bocsi, most √©pp nem √©rem el a szervert. √çrd m√°sk√©nt: mit szeretn√©l pontosan? üòä';
    }
    if(!reply) reply = 'Rendben! Hogyan folytassuk?';
    addMsg(reply, 'bot');
  }

  send.onclick = () => handleSend(inp.value);
  inp.addEventListener('keydown', (e)=>{
    if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); handleSend(inp.value); }
  });

  // javaslatokra katt
  sugg.addEventListener('click', e=>{
    const t = e.target.closest('.sugg'); if(!t) return;
    handleSend(t.textContent.trim());
  });
})();
</script>
</body>
</html>

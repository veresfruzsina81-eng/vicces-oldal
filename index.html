<!-- ==== FULLSCREEN AUTH + JÃTÃ‰KOK ==== -->
<style>
  :root{--au-txt:#e9eefc;--au-muted:#9db0d4;--au-border:rgba(255,255,255,.16);--au-glass:rgba(15,24,45,.72);--au-btn1:#2e5fff;--au-btn2:#1b47d8}
  [data-auth="required"]{display:none}
  .au-overlay{
    position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
    background:
      radial-gradient(1200px 900px at 10% 10%, rgba(46,95,255,.20), transparent 55%),
      radial-gradient(1200px 900px at 90% 90%, rgba(87,215,158,.18), transparent 55%),
      rgba(3,7,18,.88);
    backdrop-filter:saturate(120%) blur(8px);
  }
  .au-card{
    width:min(94vw, 560px);
    border:1px solid var(--au-border); border-radius:22px;
    background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
    color:var(--au-txt);
    box-shadow:0 30px 80px rgba(0,0,0,.45); backdrop-filter: blur(14px);
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    padding:22px;
  }
  .au-top{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:6px}
  .au-top h3{margin:0;font-size:22px;font-weight:800}
  .au-x{background:transparent;color:var(--au-txt);border:0;font-size:18px;cursor:pointer;opacity:.75}
  .au-tabs{margin:14px 0;display:flex;gap:8px;background:rgba(255,255,255,.06);border:1px solid var(--au-border);padding:6px;border-radius:999px}
  .au-tabs button{flex:1;border-radius:999px;padding:10px 14px;border:0;background:transparent;color:var(--au-muted);font-weight:700;cursor:pointer}
  .au-tabs .active{background:#0f2142;color:#fff}
  .au-form label{display:block;font-size:13px;color:var(--au-muted);margin:10px 2px}
  .au-form input{
    width:100%;padding:13px 14px;border-radius:14px;border:1px solid var(--au-border);
    background:var(--au-glass); color:var(--au-txt); outline:none
  }
  .au-form input:focus{box-shadow:0 0 0 4px rgba(46,95,255,.18); border-color:#2e5fff}
  .au-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .au-btn{width:100%;padding:13px 16px;border-radius:14px;border:0;cursor:pointer;
    background:linear-gradient(180deg,var(--au-btn1),var(--au-btn2)); color:#fff; font-weight:800}
  .au-note{font-size:13px;margin-top:6px}
  .au-ok{color:#57d79e} .au-err{color:#ff6b6b}
  .au-hide{display:none!important}

  /* Games */
  #games{display:none; padding:20px; font-family:Inter,system-ui,sans-serif; color:#eee; text-align:center}
  #game-menu{margin-bottom:20px}
  #memory-grid{
    display:grid; grid-template-columns:repeat(auto-fill, minmax(60px,1fr));
    gap:8px; max-width:1000px; margin:0 auto;
  }
  .card{
    background:#1b2a48; border-radius:8px; height:60px; display:flex; align-items:center; justify-content:center;
    font-size:28px; cursor:pointer; transition:all .2s ease; user-select:none;
  }
  .card.revealed{background:#2d4e8a}
  .card.matched{background:#2ecc71; color:#fff; cursor:default}
</style>

<!-- AUTH OVERLAY -->
<div id="au-overlay" class="au-overlay" role="dialog" aria-modal="true">
  <div class="au-card">
    <div class="au-top">
      <h3>BejelentkezÃ©s & RegisztrÃ¡ciÃ³</h3>
      <button id="au-close" class="au-x">âœ•</button>
    </div>
    <div class="au-tabs">
      <button id="au-tab-login" class="active">BelÃ©pÃ©s</button>
      <button id="au-tab-reg">RegisztrÃ¡ciÃ³</button>
    </div>

    <!-- LOGIN -->
    <form id="au-form-login" class="au-form" autocomplete="on">
      <label>E-mail</label>
      <input type="email" name="email" placeholder="te@pelda.hu" required />
      <label>JelszÃ³</label>
      <input type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required minlength="6" />
      <div id="au-msg-login" class="au-note"></div>
      <div style="margin-top:12px"><button class="au-btn" type="submit">BelÃ©pÃ©s</button></div>
    </form>

    <!-- REGISTER -->
    <form id="au-form-reg" class="au-form au-hide" autocomplete="on">
      <div class="au-row">
        <div>
          <label>NÃ©v</label>
          <input type="text" name="name" placeholder="Teljes neved" required />
        </div>
        <div>
          <label>E-mail</label>
          <input type="email" name="email" placeholder="te@pelda.hu" required />
        </div>
      </div>
      <label>JelszÃ³ (min. 6)</label>
      <input type="password" name="password" placeholder="legalÃ¡bb 6 karakter" required minlength="6" />
      <div id="au-msg-reg" class="au-note"></div>
      <div style="margin-top:12px"><button class="au-btn" type="submit">FiÃ³k lÃ©trehozÃ¡sa</button></div>
    </form>
  </div>
</div>

<!-- GAMES AREA -->
<div id="games">
  <h2>ğŸ® JÃ¡tÃ©kok menÃ¼</h2>
  <div id="game-menu">
    <button onclick="startMemory()">ğŸ§  MemÃ³riajÃ¡tÃ©k (60 pÃ¡r)</button>
  </div>
  <div id="memory-grid"></div>
  <p id="memory-status"></p>
</div>

<script>
(()=>{"use strict";
  const $=(s)=>document.querySelector(s);
  const ov=$("#au-overlay"), tabL=$("#au-tab-login"), tabR=$("#au-tab-reg");
  const fL=$("#au-form-login"), fR=$("#au-form-reg");
  const mL=$("#au-msg-login"), mR=$("#au-msg-reg");

  const K_USERS="au_users_v1"; const K_ME="au_me_v1";

  const load=(k,def)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? def }catch{ return def } };
  const save=(k,v)=> localStorage.setItem(k, JSON.stringify(v));
  const show=(el)=> el.classList.remove("au-hide");
  const hide=(el)=> el.classList.add("au-hide");

  function setTab(which){
    if(which==="login"){ tabL.classList.add("active"); tabR.classList.remove("active"); show(fL); hide(fR); mL.textContent=""; mR.textContent=""; }
    else{ tabR.classList.add("active"); tabL.classList.remove("active"); show(fR); hide(fL); mL.textContent=""; mR.textContent=""; }
  }
  tabL.onclick=()=>setTab("login"); tabR.onclick=()=>setTab("reg");

  async function sha256(str){
    const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(str));
    return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
  }
  function salt(len=16){ const a=new Uint8Array(len); crypto.getRandomValues(a); return Array.from(a).map(b=>b.toString(16).padStart(2,"0")).join(""); }

  function showGames(){ ov.style.display="none"; document.getElementById("games").style.display="block"; }

  // REGISTER
  fR.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const name=fR.name.value.trim(), email=fR.email.value.trim().toLowerCase(), pw=fR.password.value;
    if(!name||!email||pw.length<6){ mR.textContent="HiÃ¡nyzÃ³ adat."; mR.className="au-note au-err"; return; }
    const users=load(K_USERS,{}); if(users[email]){ mR.textContent="MÃ¡r van fiÃ³k."; mR.className="au-note au-err"; return; }
    const s=salt(); const h=await sha256(pw+s);
    users[email]={name,email,salt:s,hash:h}; save(K_USERS,users); save(K_ME,{name,email});
    showGames();
  });

  // LOGIN
  fL.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const email=fL.email.value.trim().toLowerCase(), pw=fL.password.value;
    const users=load(K_USERS,{}); const u=users[email];
    if(!u){ mL.textContent="Nincs ilyen felhasznÃ¡lÃ³."; mL.className="au-note au-err"; return; }
    const h=await sha256(pw+u.salt);
    if(h!==u.hash){ mL.textContent="HibÃ¡s jelszÃ³."; mL.className="au-note au-err"; return; }
    save(K_ME,{name:u.name,email:u.email});
    showGames();
  });

  // Ha mÃ¡r belÃ©pve volt
  if(load(K_ME,null)) showGames();
})();

// ====== MEMÃ“RIAJÃTÃ‰K =====
let memoryFirst=null, memoryLock=false, memoryPairs=0;
function startMemory(){
  const grid=document.getElementById("memory-grid");
  grid.innerHTML=""; document.getElementById("memory-status").textContent="";
  memoryFirst=null; memoryLock=false; memoryPairs=0;

  const base=["ğŸ”¥","â„ï¸","ğŸŒ™","ğŸŒ","â­","ğŸ€","âš¡","ğŸ’","ğŸµ","ğŸ²","ğŸ§©","ğŸ¯","ğŸš€","ğŸŒˆ","ğŸ","ğŸŒ","ğŸ“","ğŸ¥","ğŸ¥¥","ğŸŒ¹","ğŸŒ»","ğŸ„","ğŸŒµ","ğŸ","ğŸ¢","ğŸ¦Š","ğŸ¦","ğŸ¸","ğŸ™","ğŸ¬","ğŸ¦‰","ğŸ¦„","ğŸ‰","ğŸ‘‘","âš”ï¸","ğŸ›¡ï¸","ğŸ¹","ğŸ•¹ï¸","ğŸ¨","ğŸ“š","ğŸ§­","ğŸ”®","ğŸ’¡","ğŸ§¨","ğŸ","ğŸ†","ğŸ†","ğŸ“€","ğŸ“·","ğŸ¬","ğŸ¤","ğŸ¹","ğŸ¥","ğŸ»","ğŸ›¸","ğŸ°","ğŸ§±","ğŸš¦","ğŸ—¿"];
  const symbols=[]; for(let i=0;i<60;i++){ symbols.push(base[i%base.length]); }
  let cards=[...symbols,...symbols]; cards.sort(()=>Math.random()-0.5);

  cards.forEach(sym=>{
    const div=document.createElement("div");
    div.className="card"; div.dataset.sym=sym;
    div.onclick=()=>flipCard(div); document.getElementById("memory-grid").appendChild(div);
  });
}
function flipCard(card){
  if(memoryLock||card.classList.contains("revealed")||card.classList.contains("matched")) return;
  card.classList.add("revealed"); card.textContent=card.dataset.sym;
  if(!memoryFirst){ memoryFirst=card; }
  else{
    if(memoryFirst.dataset.sym===card.dataset.sym){
      memoryFirst.classList.add("matched"); card.classList.add("matched"); memoryPairs++;
      if(memoryPairs===60) document.getElementById("memory-status").textContent="ğŸ‰ NyertÃ©l! Minden pÃ¡r megvan!";
      memoryFirst=null;
    }else{
      memoryLock=true;
      setTimeout(()=>{
        card.classList.remove("revealed"); card.textContent="";
        memoryFirst.classList.remove("revealed"); memoryFirst.textContent="";
        memoryFirst=null; memoryLock=false;
      },700);
    }
  }
}
</script>
<!-- ==== /AUTH + JÃTÃ‰KOK ==== -->

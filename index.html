<!DOCTYPE html><html lang="hu"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mini AI Chat</title>
<style>
body{margin:0;background:#0f1216;color:#e8ecf1;font-family:system-ui,Segoe UI,Roboto,Arial}
.wrap{max-width:900px;margin:40px auto;padding:16px}
.h{font-size:22px;margin:0 0 6px}
.sub{color:#96a1b3;margin:0 0 18px}
.chat{height:60vh;min-height:320px;background:#0b1117;border:1px solid #202a36;border-radius:14px;padding:12px;overflow:auto}
.b{max-width:80%;padding:10px 12px;border-radius:12px;margin:6px 0;white-space:pre-wrap}
.me{background:#1b2430;border:1px solid #334051;margin-left:auto}
.bot{background:#141b23;border:1px solid #2b3542}
.row{display:flex;gap:8px;margin-top:10px}
input,select{background:#0f141b;border:1px solid #2a3442;color:#e8ecf1;border-radius:10px;padding:10px 12px}
input{flex:1}
button{background:#7c5cff;border:0;color:#fff;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
.note{font-size:12px;color:#96a1b3;margin-top:8px}
</style></head><body>
<div class="wrap">
  <div class="h">Az oldalt l√©trehozta: <b>H.T</b> ‚Äî Kellemes besz√©lget√©st! üéâ</div>
  <p class="sub">Ez a v√°ltozat m√°r **val√≥ban** az OpenAI API-t h√≠vja Netlify Function√∂n kereszt√ºl.</p>

  <div id="chat" class="chat"></div>

  <div class="row">
    <select id="modelSel">
      <option value="gpt-5-nano">GPT-5 nano (olcs√≥bb)</option>
      <option value="gpt-5-mini" selected>GPT-5 mini (er≈ësebb)</option>
    </select>
    <input id="msg" placeholder="√çrj ide... (Enter = k√ºld√©s)">
    <button id="send">K√ºld√©s</button>
  </div>
  <div id="info" class="note"></div>
</div>

<script>
const chat = document.getElementById('chat');
const msg = document.getElementById('msg');
const sendBtn = document.getElementById('send');
const info = document.getElementById('info');
const modelSel = document.getElementById('modelSel');

function add(text, who='bot'){
  const d=document.createElement('div'); d.className='b '+(who==='me'?'me':'bot'); d.textContent=text;
  chat.appendChild(d); chat.scrollTop=chat.scrollHeight;
}

async function callAI(userText){
  info.textContent = 'Gondolkodom‚Ä¶';
  try{
    const res = await fetch('/.netlify/functions/chat', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        model: modelSel.value || 'gpt-5-mini',
        temperature: 0.7,
        messages: [
          { role:'system', content:'Magyarul, bar√°ts√°gosan, r√∂viden v√°laszolj.' },
          { role:'user', content: userText }
        ]
      })
    });
    if(!res.ok){ info.textContent='Hiba: '+res.status; return 'Hiba a szerverrel.'; }
    const data = await res.json();
    info.textContent = '';
    return data.reply || '√úres v√°lasz.';
  }catch(e){ info.textContent='H√°l√≥zati hiba'; return 'H√°l√≥zati hiba: '+e; }
}

async function send(){
  const text = msg.value.trim(); if(!text) return;
  add(text,'me'); msg.value=''; 
  const reply = await callAI(text);
  add(reply,'bot');
}

sendBtn.addEventListener('click', send);
msg.addEventListener('keydown', e=>{ if(e.key==='Enter') send(); });

add('Szia! √çrj egy √ºzenetet, √©s v√°laszolok. ü§ñ','bot');
</script>
</body></html>

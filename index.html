<!doctype html>
<html lang="hu">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vicck√∂zpont ‚Äì Mini j√°t√©kok</title>
    <style>
      :root {
        --bg:#070b17;
        --text:#e8edff;
        --muted:#a7b1d6;
        --line:rgba(255,255,255,.14);
        --glass:rgba(255,255,255,.06);
        --ok:#22c55e;
        --info:#60a5fa;
        --shadow:0 10px 30px rgba(0,0,0,.25)
      }
      * { box-sizing:border-box }
      html,body { height:100%; margin:0 }
      body {
        background:var(--bg);
        color:var(--text);
        font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
        overflow:hidden;
      }
      a { color:inherit; text-decoration:none }
      button { cursor:pointer }

      /* H√°tt√©r v√°szon ‚Äì ne fogjon el kattint√°st */
      #bg { position:fixed; inset:0; z-index:0; pointer-events:none }

      .appbar {
        position:fixed; left:0; right:0; top:0; z-index:3;
        display:none; padding:12px 16px; gap:10px; align-items:center;
        background:linear-gradient(180deg,rgba(12,18,36,.85),rgba(12,18,36,.55));
        border-bottom:1px solid var(--line); backdrop-filter:blur(10px)
      }
      .logo { font-weight:900 }
      .who { margin-left:auto; color:#cfe1ff; font-weight:700 }

      .auth {
        position:relative; z-index:2; max-width:560px; margin:100px auto; padding:24px;
        border-radius:18px; background:linear-gradient(180deg,rgba(255,255,255,.09),rgba(255,255,255,.05));
        border:1px solid var(--line); backdrop-filter:blur(12px); box-shadow:var(--shadow)
      }
      label { display:block; font-weight:800; margin:12px 0 6px }
      input {
        width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--line);
        background:rgba(255,255,255,.07); color:var(--text)
      }
      .btn { padding:12px 16px; border:0; border-radius:14px; font-weight:900; transition:.2s transform }
      .btn:hover { transform:translateY(-1px) }
      .full { width:100% }
      .green { background:#22c55e; color:#062215 }

      /* Loader ‚Äì alapb√≥l √°tenged minden kattint√°st */
      #loading {
        position:fixed; inset:0; z-index:4; display:none; place-items:center;
        background:rgba(8,12,30,.6); backdrop-filter:blur(6px); pointer-events:none;
      }
      .loader {
        padding:16px 20px; border-radius:14px; border:1px solid var(--line);
        background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.07));
        box-shadow:var(--shadow)
      }

      #menu { position:fixed; inset:68px 0 0; z-index:2; display:none; overflow:auto; padding:18px }
      .wrap { max-width:1180px; margin:6px auto 80px }
      .tabs { display:flex; gap:10px; margin:16px 0 18px; flex-wrap:wrap }
      .tab { padding:10px 16px; border-radius:999px; border:1px solid var(--line); background:var(--glass); font-weight:800 }
      .tab.active { background:linear-gradient(90deg,#7c3aed,#22d3ee); color:#061225; border-color:transparent }
      .grid { display:grid; grid-template-columns:repeat(12,1fr); gap:22px }
      @media (max-width:1100px){ .grid{ grid-template-columns:repeat(9,1fr) } }
      @media (max-width:800px){ .grid{ grid-template-columns:repeat(6,1fr) } }
      @media (max-width:560px){ .grid{ grid-template-columns:repeat(4,1fr) } }
      .card {
        grid-column:span 4; border:1px solid var(--line); border-radius:16px; padding:16px;
        background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.07));
        backdrop-filter:blur(10px); box-shadow:var(--shadow); transition:.22s transform,.22s box-shadow
      }
      .card:hover { transform:translateY(-4px); box-shadow:0 16px 40px rgba(0,0,0,.35) }
      .card h3 { margin:0 0 8px }
      .card p { margin:0 0 12px; color:var(--muted) }
      .actions { display:flex; gap:10px; flex-wrap:wrap }
      .chip {
        padding:9px 14px; border-radius:999px; border:1px solid var(--line); background:var(--glass);
        font-weight:800; transition:.2s transform
      }
      .chip:hover { transform:translateY(-1px) }
      .chip.ok { background:#22c55e; color:#062215; border-color:transparent }
      .chip.info { background:#60a5fa; color:#071321; border-color:transparent }

      .panel {
        position:fixed; inset:0; z-index:5; display:none; place-items:center;
        background:rgba(3,6,14,.55); backdrop-filter:blur(4px); padding:14px
      }
      .inner {
        width:min(980px,96vw); max-height:86vh; overflow:auto; border:1px solid var(--line);
        border-radius:18px; background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.07));
        box-shadow:var(--shadow)
      }
      .titlebar { display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line) }
      .close { border:1px solid var(--line); background:var(--glass); border-radius:12px; padding:9px 12px; font-weight:900 }
      .content { padding:14px }
      .box { border:1px solid var(--line); border-radius:14px; background:rgba(10,12,22,.6); padding:12px }
      #homeMedia { border:1px solid var(--line); border-radius:16px; padding:14px; background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.06)) }
      .badge { padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:var(--glass); font-weight:800 }
    </style>
  </head>
  <body>
    <canvas id="bg"></canvas>

    <header class="appbar" id="bar">
      <div class="logo">Vicck√∂zpont ‚Äì Mini j√°t√©kok</div>
      <div class="who" id="who"></div>
    </header>

    <main id="login" class="auth">
      <h2>Bejelentkez√©s</h2>
      <p style="color:var(--muted)">V√°lassz az alap vagy a komolyabb j√°t√©kok k√∂z√ºl! üéÆ</p>
      <form id="form" novalidate>
        <label for="n">N√©v</label>
        <input id="n" required placeholder="N√©v">
        <label for="e">Email</label>
        <input id="e" type="email" required placeholder="valami@email.hu">
        <label for="p">Jelsz√≥</label>
        <input id="p" type="password" minlength="1" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <button class="btn green full" type="submit">Bel√©pek</button>
        <button type="button" class="btn full" id="force">Bel√©pek most (√°tugrom ellen≈ërz√©st)</button>
        <div id="err" style="color:#fecaca;font-weight:800;margin-top:8px;min-height:18px"></div>
      </form>
    </main>

    <div id="loading">
      <div class="loader" id="loadTxt">Bet√∂lt√©s‚Ä¶</div>
    </div>

    <section id="menu">
      <div class="wrap">

        <!-- Media + fun -->
        <div id="homeMedia">
          <h3 style="margin:0 0 8px">üéµ Hangok & Id≈ëj√°r√°s</h3>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px">
            <button class="chip ok" data-sound="prank">Prank ‚ñ∂Ô∏è</button>
            <button class="chip info" data-sound="talent">Tehets√©ges ‚ñ∂Ô∏è</button>
            <button class="chip" id="stopAll">Le√°ll√≠t</button>
            <span class="badge" id="sndStatus">Hang: k√©sz</span>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button id="btnWx" class="chip ok">Po√©nos id≈ëj√°r√°s</button>
            <div id="wx" class="box">Nyomd meg a gombot!</div>
            <div class="box" id="clock">--:--:--</div>
          </div>
        </div>

        <!-- Tabs for GAMES only -->
        <div class="tabs">
          <button class="tab active" data-tab="basic">Alap j√°t√©kok</button>
          <button class="tab" data-tab="adv">Komolyabb j√°t√©kok</button>
        </div>

        <div id="tab-basic" class="grid">
          <div class="card">
            <h3>‚ùå Am≈ëba</h3>
            <p>J√°tssz a g√©p ellen vagy ketten.</p>
            <div class="actions"><button class="chip ok" data-open="#panelTTT">Megnyit√°s</button></div>
          </div>
          <div class="card">
            <h3>‚úä‚úã‚úå K≈ë‚ÄìPap√≠r‚ÄìOll√≥</h3>
            <p>Gyors meccsek, pontsz√°mmal.</p>
            <div class="actions"><button class="chip ok" data-open="#panelRPS">Megnyit√°s</button></div>
          </div>
          <div class="card">
            <h3>üî¢ Sz√°mkital√°l√≥ (1‚Äì10)</h3>
            <p>Tal√°ld el 5 pr√≥b√°b√≥l.</p>
            <div class="actions"><button class="chip ok" data-open="#panelGuess">Megnyit√°s</button></div>
          </div>
          <div class="card">
            <h3>ü™ô Kapar√≥s sorsjegy</h3>
            <p>Kaparj √©s n√©zd meg, nyert√©l-e!</p>
            <div class="actions"><button class="chip ok" data-open="#panelScratch">Megnyit√°s</button></div>
          </div>
        </div>

        <div id="tab-adv" class="grid" style="display:none">
          <div class="card">
            <h3>üïπÔ∏è Runner</h3>
            <p>Ugorj az akad√°lyok felett, gy≈±jts pontot!</p>
            <div class="actions"><button class="chip info" data-open="#panelRun">Megnyit√°s</button></div>
          </div>
          <div class="card">
            <h3>üèÜ Jelv√©nyek</h3>
            <p>Helyi statok.</p>
            <div class="actions"><button class="chip info" data-open="#panelAch">Megnyit√°s</button></div>
          </div>
        </div>

        <!-- Separate section for Quiz & Chat -->
        <div class="wrap" style="margin-top:22px">
          <h3 style="margin:0 0 8px">üß† K√ºl√∂n r√©sz: Kv√≠z & Chat</h3>
          <p style="color:var(--muted);margin:0 0 10px">Itt tal√°lod a kv√≠zt √©s a po√©nos chatet, a j√°t√©kf√ºleken k√≠v√ºl.</p>
          <div class="grid">
            <div class="card">
              <h3>üéØ Kv√≠z Bajnoks√°g</h3>
              <p>15 k√©rd√©s ‚Ä¢ 15 mp/k√©rd√©s ‚Ä¢ Toplista</p>
              <div class="actions"><button class="chip info" data-open="#panelQuiz">Megnyit√°s</button></div>
            </div>
            <div class="card">
              <h3>üí¨ Chat</h3>
              <p>Po√©nos v√°laszok, tipp √ºzenetek.</p>
              <div class="actions"><button class="chip info" data-open="#panelChat">Megnyit√°s</button></div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Panels -->
    <div class="panel" id="panelTTT">
      <div class="inner">
        <div class="titlebar">
          <div class="title">‚ùå Am≈ëba</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content">
          <div id="ttt" style="display:grid;grid-template-columns:repeat(3,110px);grid-template-rows:repeat(3,110px);gap:10px;justify-content:center"></div>
          <div class="box" id="tttInfo" style="margin-top:10px;text-align:center">Te kezdesz: X</div>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap">
            <button class="chip info" id="tttNew">√öjrakezd</button>
            <label style="display:flex;gap:6px;align-items:center">
              <input type="checkbox" id="tttCpu" checked>
              <span style="color:#a7b1d6">J√°t√©k a g√©p ellen</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="panelRPS">
      <div class="inner">
        <div class="titlebar">
          <div class="title">‚úä‚úã‚úå K≈ë‚ÄìPap√≠r‚ÄìOll√≥</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content">
          <div class="box" id="rpsInfo">Els≈ë 5-ig megy. Te: 0 ‚Äì G√©p: 0</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <button class="chip ok" data-rps="rock">‚úä K≈ë</button>
            <button class="chip info" data-rps="paper">‚úã Pap√≠r</button>
            <button class="chip" data-rps="scissors">‚úå Oll√≥</button>
            <button class="chip" id="rpsReset">√öjrakezd</button>
          </div>
          <div class="box" id="rpsLog" style="margin-top:12px;max-height:240px;overflow:auto"></div>
        </div>
      </div>
    </div>

    <div class="panel" id="panelGuess">
      <div class="inner">
        <div class="titlebar">
          <div class="title">üî¢ Sz√°mkital√°l√≥ (1‚Äì10)</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content">
          <div class="box" id="gInfo">Gondoltam egy sz√°mra 1 √©s 10 k√∂z√∂tt. Van 5 tipped. üòâ</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <input id="gInput" type="number" min="1" max="10" placeholder="1..10" style="width:130px">
            <button class="chip ok" id="gTry">Tipp</button>
            <button class="chip" id="gNew">√öj j√°t√©k</button>
          </div>
          <div class="box" id="gLog" style="margin-top:12px;max-height:240px;overflow:auto"></div>
        </div>
      </div>
    </div>

    <div class="panel" id="panelScratch">
      <div class="inner">
        <div class="titlebar">
          <div class="title">ü™ô Kapar√≥s sorsjegy</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content">
          <div style="display:flex;gap:14px;flex-wrap:wrap;align-items:flex-start">
            <div style="position:relative;width:340px;height:200px;border-radius:16px;overflow:hidden;box-shadow:0 10px 28px rgba(0,0,0,.28);border:1px solid var(--line)">
              <div id="scratchPrize" style="position:absolute;inset:0;display:grid;place-items:center;background:linear-gradient(135deg,#111827,#0b1733);color:#fff;text-align:center;padding:16px">
                <div>
                  <div style="font-size:48px;line-height:1.1" id="prizeEmoji">üéÅ</div>
                  <div style="margin-top:8px;font-weight:900;font-size:20px" id="prizeText">Nyerem√©ny‚Ä¶</div>
                  <div style="margin-top:4px;color:#a7b1d6" id="prizeSub">Kaparj a felfed√©shez!</div>
                </div>
              </div>
              <canvas id="scratchCanvas" width="340" height="200" style="position:absolute;inset:0"></canvas>
            </div>
            <div style="flex:1;min-width:240px">
              <div class="box" id="scratchInfo">H√∫zd az egeret (vagy az ujjad) a k√°rty√°n!</div>
              <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
                <button class="chip ok" id="scratchNew">√öj k√°rtya</button>
                <button class="chip" id="scratchReveal">Mutasd meg</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="panelQuiz">
      <div class="inner">
        <div class="titlebar">
          <div class="title">üéØ Kv√≠z</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content" id="quizContent"></div>
      </div>
    </div>

    <div class="panel" id="panelChat">
      <div class="inner">
        <div class="titlebar">
          <div class="title">üí¨ Chat</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content" id="chatContent"></div>
      </div>
    </div>

    <div class="panel" id="panelRun">
      <div class="inner">
        <div class="titlebar">
          <div class="title">üïπÔ∏è Runner</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content" id="runContent"></div>
      </div>
    </div>

    <div class="panel" id="panelAch">
      <div class="inner">
        <div class="titlebar">
          <div class="title">üèÜ Jelv√©nyek</div>
          <button class="close" data-close>Bez√°r</button>
        </div>
        <div class="content" id="achContent"></div>
      </div>
    </div>

    <audio id="prank" src="prank_short.mp3" preload="auto"></audio>
    <audio id="talent" src="tehetseges.mp3.m4a" preload="auto"></audio>

    <script>
      const qs = s => document.querySelector(s), qsa = s => document.querySelectorAll(s);

      /* Background blobs */
      (() => {
        const c = qs('#bg'), x = c.getContext('2d');
        let w = innerWidth, h = innerHeight;
        c.width = w; c.height = h;
        addEventListener('resize', () => { w = innerWidth; h = innerHeight; c.width = w; c.height = h });
        const N = 90, P = [];
        for (let i=0;i<N;i++) P.push({ x:Math.random()*w, y:Math.random()*h, vx:(Math.random()-.5)*.6, vy:(Math.random()-.5)*.6 });
        function grad(t){
          const a = .5 + .5*Math.sin(t*.0012), b = .5 + .5*Math.cos(t*.0015);
          const g = x.createLinearGradient(0,0,w,h);
          g.addColorStop(0, `rgba(${120+80*a|0},60,237,.25)`);
          g.addColorStop(1, `rgba(34,${210+40*b|0},238,.25)`);
          return g;
        }
        function loop(t){
          x.clearRect(0,0,w,h);
          x.fillStyle = '#0a0f22'; x.fillRect(0,0,w,h);
          x.globalCompositeOperation='lighter';
          for(const p of P){
            p.x += p.vx; p.y += p.vy;
            if(p.x < -50 || p.x > w+50) p.vx *= -1;
            if(p.y < -50 || p.y > h+50) p.vy *= -1;
            x.fillStyle = grad(t); x.beginPath(); x.arc(p.x,p.y,40,0,Math.PI*2); x.fill();
          }
          x.globalCompositeOperation='source-over';
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      })();

      /* Login + shell */
      const login = qs('#login'), bar = qs('#bar'), who = qs('#who'), menu = qs('#menu'), loading = qs('#loading'), loadTxt = qs('#loadTxt');
      function enterApp(name){
        loading.style.display='grid';      // csak vizu√°lis
        const lines = ["K√°v√© meleg√≠t√©se‚Ä¶","J√°t√©kok pol√≠roz√°sa‚Ä¶","Po√©nmotor beind√≠t√°sa‚Ä¶"];
        let i=0; const iv=setInterval(()=>loadTxt.textContent=lines[i++%lines.length],700);
        setTimeout(()=>{
          clearInterval(iv);
          loading.style.display='none';
          login.style.display='none';
          bar.style.display='flex';
          menu.style.display='block';
          who.textContent='√údv, '+(name||'Vend√©g')+'!';
          document.body.style.overflow='auto';
        }, 900);
      }
      qs('#form').addEventListener('submit', e => {
        e.preventDefault();
        const n = (qs('#n')?.value || '').trim();
        enterApp(n || 'Vend√©g');
      });
      qs('#force')?.addEventListener('click', () => {
        const n = (qs('#n')?.value || '').trim();
        enterApp(n || 'Vend√©g');
      });

      /* Tabs only switch game grids */
      function setTab(which){
        qs('#tab-basic').style.display = which === 'basic' ? 'grid' : 'none';
        qs('#tab-adv').style.display   = which === 'adv'   ? 'grid' : 'none';
      }
      qsa('.tab').forEach(t => t.addEventListener('click', () => {
        qsa('.tab').forEach(z => z.classList.remove('active'));
        t.classList.add('active'); setTab(t.dataset.tab);
      }));
      setTab('basic');

      /* Open/Close panels */
      qsa('[data-open]').forEach(b => b.addEventListener('click', () => {
        const p = qs(b.getAttribute('data-open')); if (p) p.style.display='grid';
      }));
      qsa('[data-close]').forEach(b => b.addEventListener('click', () => b.closest('.panel').style.display='none'));
      qsa('.panel').forEach(p => p.addEventListener('click', e => { if(e.target === p) p.style.display='none' }));

      /* Media area */
      (() => {
        const A1 = qs('#prank'), A2 = qs('#talent'), status = qs('#sndStatus');
        function stop(){ try { A1?.pause(); A2?.pause(); } catch {} }
        function play(id){
          stop();
          const a = id === 'talent' ? A2 : A1;
          if(!a || !a.src){ alert('T√∂ltsd fel: ' + (id==='talent' ? 'tehetseges.mp3.m4a' : 'prank_short.mp3')); return }
          a.currentTime=0;
          a.play().catch(()=>alert('Kattints az oldalra egyet, majd pr√≥b√°ld √∫jra (autoplay tilt√°s).'));
        }
        qsa('[data-sound]').forEach(b => b.addEventListener('click', () => play(b.getAttribute('data-sound'))));
        qs('#stopAll')?.addEventListener('click', stop);
        const WX = [
          "Ma 100% es√©ly po√©nz√°porra! ‚òîüòÇ",
          "Holnap naps√ºt√©s √©s r√∂h√∂g√©shull√°m. üåûü§£",
          "Viharos nevet√©s k√∂zeleg! üí®üòÜ",
          "Der√ºlt √©g, de a szomsz√©d viccei bebor√≠tanak. üå§"
        ];
        qs('#btnWx')?.addEventListener('click', () => qs('#wx').textContent = WX[Math.floor(Math.random()*WX.length)]);
        (function tick(){ qs('#clock').textContent = new Date().toLocaleTimeString('hu-HU',{hour12:false}); requestAnimationFrame(tick) })();
        fetch('prank_short.mp3',{method:'HEAD'}).then(r=>{ if(!r.ok) throw 0 }).catch(()=>status.textContent='Hang: hi√°nyzik (prank_short.mp3)');
        fetch('tehetseges.mp3.m4a',{method:'HEAD'}).then(r=>{ if(!r.ok) throw 0 }).catch(()=>status.textContent='Hang: hi√°nyzik (tehetseges.mp3.m4a)');
      })();

      /* Tic Tac Toe */
      (() => {
        const grid = qs('#ttt'), info = qs('#tttInfo'), cpu = qs('#tttCpu'), newBtn = qs('#tttNew');
        let cells, turn, board;
        function start(){
          grid.innerHTML=''; board = Array(9).fill(null); turn='X'; info.textContent='Te kezdesz: X';
          for(let i=0;i<9;i++){
            const cell = document.createElement('button');
            cell.className='box'; cell.style.fontSize='40px'; cell.onclick = () => move(i);
            grid.appendChild(cell);
          }
          cells = [...grid.children];
        }
        function move(i){
          if(board[i]) return;
          board[i] = turn; cells[i].textContent = turn;
          if(check(turn)) return win(turn);
          turn = turn === 'X' ? 'O' : 'X'; info.textContent = 'K√∂vetkez≈ë: ' + turn;
          if(turn === 'O' && cpu.checked) cpuMove();
        }
        function cpuMove(){
          let empty = board.map((v,i)=>v?null:i).filter(v=>v!==null);
          let pick = empty[Math.floor(Math.random()*empty.length)];
          setTimeout(()=>move(pick),450);
        }
        function check(p){
   function check(p){
  const L=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return L.some(line=>line.every(i=>board[i]===p));
}
      })();
    </script>
  </body>
</html>

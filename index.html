<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vicck√∂zpont ‚Äì J√°t√©k men√º (Alap + Komolyabb)</title>
<style>
:root{
  --bg:#070b17; --text:#e8edff; --muted:#a7b1d6; --line:rgba(255,255,255,.14);
  --glass:rgba(255,255,255,.06);
  --brand1:#7c3aed; --brand2:#22d3ee;
  --ok:#22c55e; --info:#60a5fa; --warn:#f59e0b; --danger:#ef4444;
  --goodGrad:linear-gradient(90deg,#22c55e,#16a34a);
  --infoGrad:linear-gradient(90deg,#60a5fa,#3b82f6);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{background:var(--bg); color:var(--text); font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; overflow:hidden}
a{color:inherit}
button{cursor:pointer}

/* 3D h√°tt√©r */
#bg3d{position:fixed; inset:0; z-index:0; display:block}

/* Appbar */
.appbar{position:fixed; top:0; left:0; right:0; z-index:3; display:none;
  padding:10px 14px; gap:10px; align-items:center;
  background:linear-gradient(180deg, rgba(12,18,36,.85), rgba(12,18,36,.55));
  backdrop-filter:blur(10px); border-bottom:1px solid var(--line) }
.logo{display:flex; align-items:center; gap:10px; font-weight:900}
.logo .dot{width:12px;height:12px;border-radius:50%;background:linear-gradient(90deg,var(--brand1),var(--brand2)); box-shadow:0 0 18px #22d3ee90}
.appbar .profile{margin-left:auto; display:flex; align-items:center; gap:10px; font-weight:700; color:#cfe1ff}

/* Login k√°rtya */
.auth{position:relative; z-index:2; max-width:440px; margin:80px auto; padding:24px; border-radius:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border:1px solid var(--line); backdrop-filter:blur(10px); box-shadow:0 30px 80px rgba(0,0,0,.35)}
label{display:block; font-weight:800; margin:12px 0 6px}
input{width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--line); background:rgba(255,255,255,.06); color:var(--text)}
.btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 16px; border:0; border-radius:12px; font-weight:900}
.btn.full{width:100%}
.btn.green{background:var(--goodGrad); color:#062215; box-shadow:0 10px 30px rgba(34,197,94,.25)}
.err{color:#fecaca; font-weight:800; min-height:18px; margin-top:10px}
.muted{color:var(--muted)}

/* Loading overlay */
#loading{position:fixed; inset:0; z-index:4; display:none; place-items:center;
  background:rgba(8,12,30,.6); backdrop-filter:blur(6px)}
.loader{width:min(360px,92vw); padding:18px; border-radius:14px;
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  border:1px solid var(--line); text-align:center; box-shadow:0 20px 60px rgba(0,0,0,.45)}

/* Men√º */
#menu{position:fixed; inset:70px 0 0; z-index:2; display:none; overflow:auto; padding:16px}
.menu-wrap{max-width:1100px; margin:0 auto}
.tabs{display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap}
.tab{padding:10px 14px; border-radius:999px; border:1px solid var(--line); background:var(--glass); font-weight:800}
.tab.active{background:linear-gradient(90deg,#7c3aed,#22d3ee); color:#061225; border-color:transparent}
.grid{display:grid; grid-template-columns:repeat(12,1fr); gap:14px}
@media (max-width:980px){ .grid{grid-template-columns:repeat(8,1fr)} }
@media (max-width:640px){ .grid{grid-template-columns:repeat(4,1fr)} }
.card{grid-column:span 4; border:1px solid var(--line); border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)); backdrop-filter:blur(8px); padding:14px; box-shadow:0 16px 50px rgba(0,0,0,.3)}
.card h3{margin:0 0 8px}
.card p{margin:0 0 10px; color:var(--muted)}
.card .actions{display:flex; gap:8px; flex-wrap:wrap}
.chip{padding:8px 12px; border-radius:999px; border:1px solid var(--line); background:var(--glass); font-weight:800}
.chip.ok{background:var(--goodGrad); color:#062215; border-color:transparent}
.chip.info{background:var(--infoGrad); color:#071321; border-color:transparent}

/* Panelok (j√°t√©k ablakok) ‚Äì mobilbar√°t, k√∂z√©pre igaz√≠tott */
.panel{position:fixed; inset:0; z-index:5; display:none; place-items:center; background:rgba(3,6,14,.5); backdrop-filter:blur(4px); padding:12px}
.panel .inner{width:min(980px,96vw); max-height:86vh; overflow:auto; border:1px solid var(--line); border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)); box-shadow:0 20px 60px rgba(0,0,0,.45)}
.panel .titlebar{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--line)}
.panel .title{font-weight:900}
.close{border:1px solid var(--line); background:var(--glass); border-radius:10px; padding:8px 10px; font-weight:800}

/* J√°t√©k bels≈ëk */
.box{border:1px solid var(--line); border-radius:12px; background:rgba(10,12,22,.6); padding:12px}

/* Kv√≠z feh√©r k√°rtya */
.quiz-card{background:#fff; color:#000; border-radius:12px; padding:12px; border:1px solid rgba(0,0,0,.1)}
.quiz-card .box{background:#f9f9f9; color:#000; border:1px solid rgba(0,0,0,.1)}
.answers{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:10px}
.ans{padding:12px; border-radius:12px; border:1px solid rgba(0,0,0,.1); background:#f9f9f9; cursor:pointer; font-weight:800}
.ans.correct{outline:2px solid #22c55e}
.ans.wrong{outline:2px solid #ef4444}
.badge{padding:6px 10px; background:#eef2ff; color:#111827; border:1px solid rgba(0,0,0,.08); border-radius:999px}
.meter{flex:1; height:10px; background:#e5e7eb; border:1px solid rgba(0,0,0,.08); border-radius:999px; overflow:hidden}
.meter>span{display:block; height:100%; width:100%; background:linear-gradient(90deg,#ef4444,#dc2626); transform-origin:left; transform:scaleX(1); transition:transform .2s linear}

/* Am≈ëba */
.ttt-grid{display:grid; grid-template-columns:repeat(3,100px); grid-template-rows:repeat(3,100px); gap:8px; justify-content:center}
.ttt-cell{display:grid; place-items:center; font-size:36px; font-weight:900; border-radius:12px; background:rgba(255,255,255,.10); border:1px solid var(--line); user-select:none; cursor:pointer}
.ttt-cell.win{background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.15))}
.ttt-panel{display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; margin-top:10px}

/* Chat */
.chat-box{height:320px; border:1px solid var(--line); background:rgba(10,12,22,.55); border-radius:14px; padding:12px; overflow:auto; scroll-behavior:smooth}
.msg{max-width:70%; padding:10px 12px; border-radius:12px; margin:8px 0; line-height:1.3; word-wrap:break-word}
.user{margin-left:auto; background:linear-gradient(180deg, rgba(96,165,250,.25), rgba(96,165,250,.15)); border:1px solid #60a5fa55}
.bot{margin-right:auto; background:linear-gradient(180deg, rgba(124,58,237,.25), rgba(124,58,237,.15)); border:1px solid #7c3aed55}
.chat-input{display:flex; gap:8px; margin-top:10px}
.chat-input input{flex:1}

/* Runner (komolyabb, ugr√°l√≥s) */
#runnerCanvas{width:100%; max-height:60vh; background:linear-gradient(180deg,#0b1226,#0f1b3a); border:1px solid var(--line); border-radius:12px}
.runner-ui{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:10px}

</style>
</head>
<body>

<canvas id="bg3d"></canvas>

<header class="appbar" id="appbar">
  <div class="logo"><span class="dot"></span> Vicck√∂zpont ‚Äì J√°t√©k men√º</div>
  <div class="profile" id="profileName"></div>
</header>

<!-- LOGIN -->
<main id="loginWrap" class="auth">
  <h1>Bejelentkez√©s</h1>
  <p class="muted">V√°lassz a mini j√°t√©kok k√∂z√ºl ‚Äì alap vagy komolyabb m√≥ka. üî•</p>
  <form id="form" novalidate>
    <label for="name">N√©v</label>
    <input id="name" type="text" required placeholder="N√©v">
    <label for="email">Email</label>
    <input id="email" type="email" required placeholder="valami@email.hu">
    <label for="pwd">Jelsz√≥</label>
    <input id="pwd" type="password" minlength="4" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button class="btn green full" type="submit">Bel√©pek</button>
    <div id="err" class="err"></div>
  </form>
</main>

<!-- Loading -->
<div id="loading"><div class="loader"><div id="loadingText">K√°v√©szemek ≈ërl√©se‚Ä¶</div></div></div>

<!-- F≈êMEN√ú -->
<section id="menu">
  <div class="menu-wrap">
    <div class="tabs">
      <button class="tab active" data-tab="basic">Alap j√°t√©kok</button>
      <button class="tab" data-tab="advanced">Komolyabb j√°t√©kok</button>
    </div>

    <div id="tab-basic" class="grid">
      <div class="card">
        <h3>üéØ Kv√≠z Bajnoks√°g</h3>
        <p>15 k√©rd√©s ‚Ä¢ 15 mp/k√©rd√©s ‚Ä¢ Toplista</p>
        <div class="actions"><button class="chip ok" data-open="#panelQuiz">Megnyit√°s</button></div>
      </div>
      <div class="card">
        <h3>‚ùå Am≈ëba</h3>
        <p>J√°tssz a g√©p ellen, vagy ketten egym√°s ellen.</p>
        <div class="actions"><button class="chip ok" data-open="#panelTtt">Megnyit√°s</button></div>
      </div>
      <div class="card">
        <h3>üí¨ Chat</h3>
        <p>Po√©nos v√°laszok, tipp √ºzenetek.</p>
        <div class="actions"><button class="chip ok" data-open="#panelChat">Megnyit√°s</button></div>
      </div>
      <div class="card">
        <h3>üéµ Hangok & Id≈ëj√°r√°s</h3>
        <p>Prank hang + po√©nos id≈ëj√°r√°s</p>
        <div class="actions"><button class="chip ok" data-open="#panelMedia">Megnyit√°s</button></div>
      </div>
    </div>

    <div id="tab-advanced" class="grid" style="display:none">
      <div class="card">
        <h3>üïπÔ∏è Ugr√°l√≥s Runner</h3>
        <p>Ugorj az akad√°lyok felett, gy≈±jts pontot! (Tap / Space)</p>
        <div class="actions"><button class="chip ok" data-open="#panelRunner">Megnyit√°s</button></div>
      </div>
      <div class="card">
        <h3>üîí Hamarosan</h3>
        <p>T√∂bb komoly mini-j√°t√©k (Snake, 2048, Flappy‚Ä¶)</p>
        <div class="actions"><button class="chip" disabled>Fejleszt√©s alatt</button></div>
      </div>
    </div>
  </div>
</section>

<!-- PANELS -->
<!-- Kv√≠z -->
<div class="panel" id="panelQuiz">
  <div class="inner">
    <div class="titlebar"><div class="title">üéØ Kv√≠z Bajnoks√°g</div><button class="close" data-close>Bez√°r</button></div>
    <div class="content" style="padding:12px">
      <div class="quiz-card">
        <h3 style="margin:6px 0 10px">15 k√©rd√©s ‚Ä¢ 15 mp/k√©rd√©s</h3>
        <div id="quizStart">
          <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
            <label for="playerName" style="margin:0 6px 0 0; font-weight:800;color:#111">N√©v:</label>
            <input id="playerName" type="text" placeholder="Neved" style="max-width:240px;background:#fff;color:#111;border:1px solid #e5e7eb">
            <button id="quizGo" class="chip ok">Ind√≠t</button>
          </div>
          <p class="muted" style="color:#333">Lej√°rt id≈ë = 0 pont. Hajr√°! üèÅ</p>
        </div>
        <div class="row" id="quizHud" style="display:none;margin-top:8px">
          <span class="badge">K√©rd√©s: <b id="qIdx">1</b>/15</span>
          <span class="badge">Pont: <b id="qScore">0</b></span>
          <span class="badge">Id≈ë: <b id="qTime">0.0s</b></span>
          <div class="meter"><span id="qBar"></span></div>
        </div>
        <div id="quizQWrap" style="display:none">
          <div id="qText" class="box" style="color:#111">K√©rd√©s‚Ä¶</div>
          <div id="qAns" class="answers"></div>
        </div>
        <div id="quizDone" style="display:none">
          <h3 style="margin:6px 0">Eredm√©ny</h3>
          <div class="box" id="quizSummary" style="color:#111"></div>
          <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
            <button id="quizAgain" class="chip info">√öjra</button>
            <button id="quizReset" class="chip" style="background:#fff;color:#111">Toplista t√∂rl√©se</button>
          </div>
        </div>
        <div style="margin-top:14px">
          <h4 style="margin:0 0 6px;color:#111">Toplista (helyi)</h4>
          <table style="width:100%;border-collapse:collapse">
            <thead><tr><th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px;color:#111">#</th><th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px;color:#111">N√©v</th><th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px;color:#111">Pont</th><th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px;color:#111">Id≈ë</th></tr></thead>
            <tbody id="lbBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Am≈ëba -->
<div class="panel" id="panelTtt">
  <div class="inner">
    <div class="titlebar"><div class="title">‚ùå Am≈ëba</div><button class="close" data-close>Bez√°r</button></div>
    <div class="content" style="padding:12px">
      <div class="ttt-grid" id="tttGrid"></div>
      <div id="tttInfo" class="box" style="margin-top:10px;text-align:center">Te kezdesz: X</div>
      <div class="ttt-panel">
        <button id="tttReset" class="chip info">√öjrakezd</button>
        <label style="display:flex; gap:6px; align-items:center">
          <input type="checkbox" id="tttCpu" checked>
          <span class="muted">J√°t√©k a g√©p ellen</span>
        </label>
      </div>
    </div>
  </div>
</div>

<!-- Chat -->
<div class="panel" id="panelChat">
  <div class="inner">
    <div class="titlebar"><div class="title">üí¨ Chat</div><button class="close" data-close>Bez√°r</button></div>
    <div class="content" style="padding:12px">
      <div id="chatBox" class="chat-box"></div>
      <div class="chat-input">
        <input id="chatInput" type="text" placeholder="√çrj valamit‚Ä¶ (szia, vicc, seg√≠ts)">
        <button id="chatSend" class="chip ok">K√ºld√©s</button>
      </div>
    </div>
  </div>
</div>

<!-- Media -->
<div class="panel" id="panelMedia">
  <div class="inner">
    <div class="titlebar"><div class="title">üéµ Hangok & Id≈ëj√°r√°s</div><button class="close" data-close>Bez√°r</button></div>
    <div class="content" style="padding:12px">
      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:8px">
        <button class="chip ok" data-sound="prank">Prank ‚ñ∂Ô∏è</button>
        <button class="chip info" data-sound="talent">Tehets√©ges ‚ñ∂Ô∏è</button>
        <button class="chip" id="stopAll">Le√°ll√≠t</button>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap">
        <button id="btnWx" class="chip ok">Po√©nos id≈ëj√°r√°s</button>
        <div id="wx" class="box">Nyomd meg a gombot!</div>
      </div>
      <div style="margin-top:8px"><div class="box" id="clock">--:--:--</div></div>
    </div>
  </div>
</div>

<!-- Runner ‚Äì ugr√°l√≥s -->
<div class="panel" id="panelRunner">
  <div class="inner">
    <div class="titlebar"><div class="title">üïπÔ∏è Ugr√°l√≥s Runner</div><button class="close" data-close>Bez√°r</button></div>
    <div class="content" style="padding:12px">
      <canvas id="runnerCanvas" width="900" height="360"></canvas>
      <div class="runner-ui">
        <button id="runStart" class="chip ok">Start / √öjra</button>
        <div class="box" id="runInfo">Tap vagy Space = Ugr√°s ‚Ä¢ Pont: 0 (Rekord: 0)</div>
      </div>
    </div>
  </div>
</div>

<!-- Hangok -->
<audio id="prank"  src="prank_short.mp3"    preload="auto"></audio>
<audio id="talent" src="tehetseges.mp3.m4a" preload="auto"></audio>

<!-- Three.js a 3D h√°tt√©rhez -->
<script src="https://unpkg.com/three@0.157.0/build/three.min.js"></script>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const $ = s => document.querySelector(s);
  const $$ = s => document.querySelectorAll(s);
  const rnd = a => a[Math.floor(Math.random()*a.length)];

  /* ===== 3D h√°tt√©r ===== */
  (function init3D(){
    const canvas = document.getElementById('bg3d'); if(!canvas) return;
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 1, 2000);
    camera.position.z = 500;
    const renderer = new THREE.WebGLRenderer({canvas, antialias:true});
    function resize(){ renderer.setSize(innerWidth, innerHeight); camera.aspect = innerWidth/innerHeight; camera.updateProjectionMatrix(); }
    resize(); addEventListener('resize', resize);

    const COUNT = 1800;
    const geom = new THREE.BufferGeometry();
    const positions = new Float32Array(COUNT*3);
    for(let i=0;i<COUNT;i++){
      positions[i*3+0] = (Math.random()-0.5)*1200;
      positions[i*3+1] = (Math.random()-0.5)*800;
      positions[i*3+2] = (Math.random()-0.5)*1200;
    }
    geom.setAttribute('position', new THREE.BufferAttribute(positions,3));
    const material = new THREE.PointsMaterial({ size:2, color:0x88ccff, transparent:true, opacity:0.9 });
    const points = new THREE.Points(geom, material);
    scene.add(points);

    let t=0, mx=0, my=0;
    addEventListener('mousemove', e=>{ mx=(e.clientX/innerWidth - .5); my=(e.clientY/innerHeight - .5); });
    function anim(){
      t+=0.0025;
      points.rotation.y += 0.0015 + mx*0.005;
      points.rotation.x = my*0.15;
      material.color.setHSL((0.6 + Math.sin(t)*0.2)%1, 0.7, 0.6);
      renderer.render(scene, camera);
      requestAnimationFrame(anim);
    }
    anim();
  })();

  /* ===== Login stabil ===== */
  const form = $('#form'), loading = $('#loading'), loadingText = $('#loadingText');
  const loginWrap = $('#loginWrap'), appbar = $('#appbar'), menu = $('#menu'), profileName = $('#profileName');
  if(form && loading && loginWrap && appbar && menu){
    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = $('#name')?.value.trim();
      const email= $('#email')?.value.trim();
      const pwd  = $('#pwd')?.value.trim();
      const err  = $('#err');
      if(err) err.textContent='';
      if(!name || !email?.includes('@') || !pwd || pwd.length<4){ if(err) err.textContent='Ellen≈ërizd a mez≈ëket!'; return; }

      loading.style.display='grid';
      const texts = ["K√°v√©szemek ≈ërl√©se‚Ä¶","V√≠z meleg√≠t√©se‚Ä¶","Cs√©sze el≈ëk√©sz√≠t√©se‚Ä¶","Humor ellen≈ërz√©se‚Ä¶"];
      let i=0; const iv=setInterval(()=>{ loadingText.textContent=texts[i++%texts.length]; }, 800);

      setTimeout(()=>{
        clearInterval(iv); loading.style.display='none';
        loginWrap.style.display='none';
        appbar.style.display='flex';
        menu.style.display='block';
        if(profileName) profileName.textContent = "√údv, " + (name || "Vend√©g") + "!";
      }, 1200);
    });
  }

  /* ===== Men√º tabok ===== */
  $$('.tab').forEach(tab=>{
    tab.addEventListener('click', ()=>{
      $$('.tab').forEach(t=>t.classList.remove('active')); tab.classList.add('active');
      const k=tab.dataset.tab;
      $('#tab-basic').style.display = (k==='basic') ? 'grid' : 'none';
      $('#tab-advanced').style.display = (k==='advanced') ? 'grid' : 'none';
    });
  });

  /* ===== Panelek nyit√°sa/z√°r√°sa ===== */
  $$('#menu [data-open]').forEach(b=>{
    b.addEventListener('click', ()=>{
      const sel=b.getAttribute('data-open'); const p=$(sel); if(!p) return;
      p.style.display='grid';
    });
  });
  $$('[data-close]').forEach(b=>{
    b.addEventListener('click', ()=> b.closest('.panel').style.display='none' );
  });
  // katt h√°tt√©rre z√°r
  $$('.panel').forEach(p=>{
    p.addEventListener('click', e=>{ if(e.target===p) p.style.display='none'; });
  });

  /* ===== Hangok + Id≈ëj√°r√°s ===== */
  const A_PRANK=$('#prank'), A_TALENT=$('#talent');
  function stopAll(){ try{A_PRANK?.pause(); A_TALENT?.pause();}catch{} }
  function playById(id){
    stopAll();
    const a = id==='talent' ? A_TALENT : A_PRANK;
    if(!a) return; a.currentTime=0;
    a.play?.().catch(()=>alert('Kattints az oldalra, hogy a b√∂ng√©sz≈ë engedje a hangot!'));
  }
  $$('[data-sound]').forEach(b=>b.addEventListener('click',()=>playById(b.getAttribute('data-sound'))));
  $('#stopAll')?.addEventListener('click', stopAll);
  $('#btnWx')?.addEventListener('click', ()=>{ const WX=["Ma 100% es√©ly van po√©nz√°porra! ‚òîüòÇ","Holnap naps√ºt√©s √©s r√∂h√∂g√©shull√°m v√°rhat√≥. üåûü§£","Viharos nevet√©s k√∂zeleg! üí®üòÜ","Der√ºlt √©g, de a szomsz√©d viccei bebor√≠tanak. üå§","Nevet√©si front: mosoly √©szlelve. üå¶"]; const wx=$('#wx'); if(wx) wx.textContent=rnd(WX); });
  (function tick(){ const d=new Date(); const c=$('#clock'); if(c) c.textContent=d.toLocaleTimeString('hu-HU',{hour12:false}); requestAnimationFrame(tick); })();

  /* ===== Chat ===== */
  const chatBox=$('#chatBox'), chatInput=$('#chatInput'), chatSend=$('#chatSend');
  if(chatBox && chatInput && chatSend){
    function pushMsg(text,who='user'){ const b=document.createElement('div'); b.className='msg '+(who==='user'?'user':'bot'); b.textContent=text; chatBox.appendChild(b); chatBox.scrollTop=chatBox.scrollHeight; }
    const botFallback=["√ârtem‚Ä¶ vagy m√©gsem? ü§î Mes√©lj t√∂bbet!","K√°v√© ut√°n minden jobb. K√©rsz? ‚òï","Mondan√©k egy viccet, de f√©lek, hogy a b√∂ng√©sz≈ëd lefagy a nevet√©st≈ël.","Ha ez egy rejtv√©ny, akkor J√ìL csin√°lod. üòÑ","Hmm‚Ä¶ √©rdekes. N√©zd meg a Kv√≠zt!"];
    const botVicc=["Mi√©rt vitt a sz√°m√≠t√≥g√©p eserny≈ët? ‚Äì V√≠rusos id≈ë lesz.","Mit mond a nulla a nyolcasnak? ‚Äì Sz√©p √∂ved van!","A k√°v√© a v√°lasz. Mi is volt a k√©rd√©s? ü§î"];
    function botReply(t0){
      const t=t0.toLowerCase();
      if(/szia|hell√≥|hello|hali/.test(t)) return "Szia! A 3D r√©szecsk√©im is k√∂sz√∂nnek. üòé";
      if(/hogy vagy\??/.test(t)) return "Remek√ºl! Mint a FPS a gamer g√©pen. üöÄ";
      if(/vicc|po[e√©]n/.test(t)) return rnd(botVicc);
      if(/k[a√°]v[e√©]/.test(t)) return "K√°v√©? Mindig! ‚òï Addig kv√≠z vagy am≈ëba?";
      if(/seg[i√≠]ts|help|hogyan/.test(t)) return "Seg√≠tek: v√°lassz a men√ºb≈ël √©s j√°tssz egyet!";
      if(/j[a√°]t[e√©]k|game/.test(t)) return "Kv√≠z? Am≈ëba? Vagy Runner! üéÆ";
      if(/\?$/.test(t)) return "J√≥ k√©rd√©s! Ha √©n tudn√°m, m√°r shaderbe is be√©gettem volna. ü§ñ";
      return rnd(botFallback);
    }
    function sendChat(){ const val=chatInput.value.trim(); if(!val) return; pushMsg(val,'user'); chatInput.value=''; setTimeout(()=>pushMsg(botReply(val),'bot'),350); }
    chatSend.addEventListener('click', sendChat);
    chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter') sendChat(); });
  }

  /* ===== Kv√≠z ===== */
  const QUESTIONS=[
    {q:"Melyik √°llat alszik a legt√∂bbet?",a:["Koala","Oroszl√°n","Macska","Panda"],c:0},
    {q:"Melyik bolyg√≥ a ‚Äûv√∂r√∂s‚Äù?",a:["Mars","V√©nusz","Jupiter","Szaturnusz"],c:0},
    {q:"Mennyi 9√ó7?",a:["56","63","72","49"],c:1},
    {q:"Mi a H2O?",a:["Oxig√©n","Hidrog√©n","V√≠z","S√≥sav"],c:2},
    {q:"Melyik f≈ëv√°ros? B√©cs",a:["Sv√°jc","Ausztria","Belgium","Csehorsz√°g"],c:1},
    {q:"Melyik n√∂v√©ny f≈±szer?",a:["Bazsalikom","Ny√≠rfa","Feny≈ë","T√∂lgy"],c:0},
    {q:"HTML-ben linket melyik tag?",a:["<div>","<a>","<link>","<p>"],c:1},
    {q:"Mennyi a œÄ kb.?",a:["2.14","3.14","3.41","4.13"],c:1},
    {q:"Melyik nem programnyelv?",a:["Python","Ruby","Photoshop","Go"],c:2},
    {q:"Magyarorsz√°g f≈ëv√°rosa?",a:["Debrecen","Gy≈ër","Budapest","Szeged"],c:2},
    {q:"RGB-ben a B?",a:["Black","Blue","Brown","Bright"],c:1},
    {q:"H√°ny nap egy h√©t?",a:["5","6","7","8"],c:2},
    {q:"Melyik reptet?",a:["Strucc","Sas","Pingvin","Kivi"],c:1},
    {q:"HTTP S bet≈±je?",a:["Secure","Simple","Serial","Service"],c:0},
    {q:"CSS mire j√≥?",a:["Adatb√°zis","St√≠lus","Szerver","Teszt"],c:1},
  ];
  const lbKey='quizLeaderboardV1';
  const lbBody = $('#lbBody');
  function loadLB(){ try{return JSON.parse(localStorage.getItem(lbKey)||'[]')}catch{return []} }
  function saveLB(arr){ localStorage.setItem(lbKey, JSON.stringify(arr.slice(0,20))); }
  function formatTime(ms){ return (ms/1000).toFixed(1)+'s'; }
  function renderLB(){
    if(!lbBody) return;
    const lb = loadLB().sort((a,b)=> (b.score - a.score) || (a.time - b.time));
    lbBody.innerHTML = lb.slice(0,10).map((r,i)=>`<tr><td style="padding:6px;border-bottom:1px solid #e5e7eb">${i+1}</td><td style="padding:6px;border-bottom:1px solid #e5e7eb">${r.name||'N√©vtelen'}</td><td style="padding:6px;border-bottom:1px solid #e5e7eb">${r.score}/15</td><td style="padding:6px;border-bottom:1px solid #e5e7eb">${formatTime(r.time)}</td></tr>`).join('') || '<tr><td colspan="4" style="padding:6px;color:#555">M√©g nincs eredm√©ny.</td></tr>';
  }
  renderLB();

  const quizStart=$('#quizStart'), quizHud=$('#quizHud'), quizQWrap=$('#quizQWrap'), quizDone=$('#quizDone');
  const qIdxEl=$('#qIdx'), qScoreEl=$('#qScore'), qTimeEl=$('#qTime'), qBar=$('#qBar'), qText=$('#qText'), qAns=$('#qAns'), quizSummary=$('#quizSummary');
  if($('#quizGo')){
    let qi=0,qScore=0,qStart=0,qTimer=null,qEndAt=0,player='';
    $('#quizGo').addEventListener('click', startQuiz);
    $('#quizAgain')?.addEventListener('click', ()=>{ if(quizStart&&quizDone){ quizStart.style.display='block'; quizDone.style.display='none'; }});
    $('#quizReset')?.addEventListener('click', ()=>{ if(confirm('Biztos t√∂rl√∂d a toplist√°t?')){ localStorage.removeItem(lbKey); renderLB(); }});

    function startQuiz(){
      player = ($('#playerName')?.value || $('#name')?.value || 'Vend√©g').trim();
      qi=0; qScore=0;
      if(quizStart) quizStart.style.display='none';
      if(quizDone) quizDone.style.display='none';
      if(quizHud) quizHud.style.display='flex';
      if(quizQWrap) quizQWrap.style.display='block';
      qStart = performance.now();
      nextQuestion();
    }
    function nextQuestion(){
      if(qi>=QUESTIONS.length){ return finishQuiz(); }
      const Q=QUESTIONS[qi];
      if(qIdxEl) qIdxEl.textContent=(qi+1);
      if(qScoreEl) qScoreEl.textContent=qScore;
      if(qText) qText.textContent=Q.q;
      if(qAns){ qAns.innerHTML=''; Q.a.forEach((txt,idx)=>{ const b=document.createElement('button'); b.className='ans'; b.textContent=txt; b.addEventListener('click',()=>choose(idx)); qAns.appendChild(b); }); }
      const D=15000; qEndAt=performance.now()+D; if(qTimer) cancelAnimationFrame(qTimer);
      (function tickBar(){
        const left=Math.max(0,qEndAt-performance.now());
        if(qBar) qBar.style.transform=`scaleX(${left/D})`;
        if(qTimeEl) qTimeEl.textContent=((performance.now()-qStart)/1000).toFixed(1)+'s';
        if(left<=0){ lock(false); setTimeout(()=>{ qi++; nextQuestion(); },600);} else { qTimer=requestAnimationFrame(tickBar); }
      })();
      function choose(idx){ if(qTimer){cancelAnimationFrame(qTimer); qTimer=null;} const ok=(idx===Q.c); if(ok) qScore++; lock(ok,idx); setTimeout(()=>{qi++;nextQuestion();},600); }
      function lock(ok,picked=-1){ if(!qAns) return; [...qAns.children].forEach((btn,i)=>{ if(i===Q.c) btn.classList.add('correct'); if(i===picked&&i!==Q.c) btn.classList.add('wrong'); btn.disabled=true; }); }
    }
    function finishQuiz(){
      if(qTimer){ cancelAnimationFrame(qTimer); qTimer=null; }
      const totalMs=performance.now()-qStart;
      if(quizHud) quizHud.style.display='none';
      if(quizQWrap) quizQWrap.style.display='none';
      if(quizDone) quizDone.style.display='block';
      if(quizSummary) quizSummary.innerHTML=`<p><b>${player}</b>, eredm√©nyed: <b>${qScore}/15</b>, id≈ë: <b>${(totalMs/1000).toFixed(1)}s</b>.</p>`;
      const lb=loadLB(); lb.push({name:player,score:qScore,time:totalMs,date:Date.now()}); saveLB(lb.sort((a,b)=> (b.score-a.score) || (a.time-b.time))); renderLB();
    }
  }

  /* ===== Am≈ëba ===== */
  const tttGrid=$('#tttGrid'), tttInfo=$('#tttInfo'), tttCpu=$('#tttCpu');
  if(tttGrid && tttInfo){
    let board, playerTurn, gameOver;
    function initTTT(){ board=Array(9).fill(null); playerTurn='X'; gameOver=false; tttGrid.innerHTML=''; for(let i=0;i<9;i++){ const c=document.createElement('div'); c.className='ttt-cell'; c.addEventListener('click',()=>tttPlay(i)); tttGrid.appendChild(c);} tttInfo.textContent="Te kezdesz: X"; }
    function winLines(){return [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];}
    function winner(){ for(const [a,b,c] of winLines()){ if(board[a]&&board[a]===board[b]&&board[a]===board[c]) return {p:board[a],line:[a,b,c]}; } if(board.every(Boolean)) return {p:'D',line:[]}; return null; }
    const pick = a => a[Math.floor(Math.random()*a.length)];
    function bestMove(mark){
      const opp=mark==='X'?'O':'X';
      for(let i=0;i<9;i++){ if(!board[i]){ board[i]=mark; if(winner()?.p===mark){ board[i]=null; return i;} board[i]=null; } }
      for(let i=0;i<9;i++){ if(!board[i]){ board[i]=opp;  if(winner()?.p===opp ){ board[i]=null; return i;} board[i]=null; } }
      if(!board[4]) return 4; const corners=[0,2,6,8].filter(i=>!board[i]); if(corners.length) return pick(corners); const sides=[1,3,5,7].filter(i=>!board[i]); if(sides.length) return pick(sides); return board.findIndex(v=>!v);
    }
    function tttPlay(i){
      if(gameOver||board[i])return; board[i]=playerTurn; renderTTT(); const w=winner(); if(w){end(w);return;}
      if(tttCpu?.checked){ playerTurn='O'; setTimeout(()=>{ const mv=bestMove('O'); if(mv>=0&&!gameOver){ board[mv]='O'; renderTTT(); const w2=winner(); if(w2){end(w2);return;} playerTurn='X'; tttInfo.textContent="Te j√∂ssz: X"; }},250);
      } else { playerTurn=(playerTurn==='X'?'O':'X'); tttInfo.textContent=`K√∂vetkez≈ë: ${playerTurn}`; }
    }
    function renderTTT(){ [...tttGrid.children].forEach((cell,i)=>{ cell.textContent=board[i]||''; cell.classList.remove('win'); }); }
    function end(res){ gameOver=true; if(res.p==='D'){ tttInfo.textContent="D√∂ntetlen!"; return; } res.line.forEach(idx=>tttGrid.children[idx].classList.add('win')); if(res.p==='X'){ tttInfo.textContent="Gratul√°lok, √ºgyes vagy! üéâ Te nyert√©l!"; } else tttInfo.textContent="A g√©p nyert. √öjra?"; }
    $('#tttReset')?.addEventListener('click', initTTT); initTTT();
  }

  /* ===== Runner ‚Äì ugr√°l√≥s ===== */
  (function runner(){
    const canvas = document.getElementById('runnerCanvas'); if(!canvas) return;
    const ctx = canvas.getContext('2d');
    let w=canvas.width, h=canvas.height;

    // J√°t√©k √°llapot
    let running=false, score=0, best=Number(localStorage.getItem('runnerBest')||0);
    const info = document.getElementById('runInfo');
    function setInfo(){ if(info) info.textContent=`Tap vagy Space = Ugr√°s ‚Ä¢ Pont: ${score} (Rekord: ${best})`; }

    // Fizika
    const ground = h-60;
    const player = { x:80, y:ground, vy:0, onGround:true, size:28 };
    const grav = 0.8, jumpV = -14;

    // Akad√°lyok
    const spikes = [];
    function spawnSpike(){ const s = { x:w+20, y:ground, w:20+Math.random()*16, h:30+Math.random()*10, passed:false }; spikes.push(s); }
    let spawnT=0;

    // Input
    function jump(){
      if(player.onGround){
        player.vy = jumpV; player.onGround=false;
      }
    }
    window.addEventListener('keydown', e=>{ if(e.code==='Space') { e.preventDefault(); jump(); } });
    canvas.addEventListener('pointerdown', jump, {passive:true});

    // Reset
    function reset(){ score=0; player.y=ground; player.vy=0; player.onGround=true; spikes.length=0; spawnT=0; setInfo(); }

    // Loop
    let raf=null, last=0, speed=6;
    function step(ts){
      if(!running){ cancelAnimationFrame(raf); return; }
      const dt = Math.min(32, ts-last); last=ts;
      ctx.clearRect(0,0,w,h);

      // h√°tt√©r cs√≠k
      ctx.fillStyle='#0a1430'; ctx.fillRect(0,0,w,h);
      ctx.fillStyle='#0b2a55'; for(let i=0;i<6;i++){ ctx.fillRect((ts/40 + i*180)%w, h-120+i*6, 90, 4); }

      // talaj
      ctx.fillStyle='#0e2447'; ctx.fillRect(0, ground+player.size/2, w, 6);

      // player fizika
      player.vy += grav;
      player.y += player.vy;
      if(player.y>=ground){ player.y=ground; player.vy=0; player.onGround=true; }

      // player rajz
      ctx.fillStyle='#7c3aed'; ctx.fillRect(player.x-player.size/2, player.y-player.size/2, player.size, player.size);

      // akad√°ly spawn
      spawnT -= dt;
      if(spawnT<=0){ spawnSpike(); spawnT = 900 - Math.min(600, score*2); }

      // akad√°lyok mozgat√°s + √ºtk√∂z√©s
      ctx.fillStyle='#22d3ee';
      for(let i=spikes.length-1;i>=0;i--){
        const s=spikes[i]; s.x -= speed + Math.min(6, score/50);
        ctx.beginPath(); ctx.moveTo(s.x, s.y+player.size/2);
        ctx.lineTo(s.x+s.w/2, s.y - s.h + player.size/2);
        ctx.lineTo(s.x+s.w, s.y+player.size/2); ctx.closePath(); ctx.fill();

        // pontsz√°m
        if(!s.passed && s.x + s.w < player.x - player.size/2){ s.passed=true; score++; setInfo(); }

        // √ºtk√∂z√©s (AABB k√∂zel√≠t√©s)
        const px=player.x-player.size/2, py=player.y-player.size/2, pw=player.size, ph=player.size;
        if(s.x < px+pw && s.x+s.w > px && s.y - s.h < py+ph && s.y > py){
          // game over
          running=false;
          best=Math.max(best, score); localStorage.setItem('runnerBest', best);
          setInfo();
          ctx.fillStyle='rgba(0,0,0,.5)'; ctx.fillRect(0,0,w,h);
          ctx.fillStyle='#fff'; ctx.font='20px sans-serif';
          ctx.fillText('√útk√∂z√©s! Kattints a Start/√öjra gombra.', 20, 40);
        }

        if(s.x + s.w < -20) spikes.splice(i,1);
      }

      raf = requestAnimationFrame(step);
    }

    document.getElementById('runStart')?.addEventListener('click', ()=>{
      reset(); running=true; last=performance.now(); raf=requestAnimationFrame(step);
    });

    setInfo();
  })();

});
</script>
</body>
</html>
